(this["webpackJsonpreact-test-app"]=this["webpackJsonpreact-test-app"]||[]).push([[0],{20:function(t,e){var n={background_colour:"rgba(0, 120, 138, 0.9);",text_colour:"rgb(248, 248, 248);",text_colour_neg:"rgb(50, 50, 50);",body:{margin:0,height:"100%",width:"100%","font-family":"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},html:{height:"100%"},header_height:"50px",side_menu_width:"300px",side_menu_background:"rgba(250, 250, 250, 1)",side_menu_text:"rgba(50, 50, 50, .8)",drop_down_header_background:"rgba(0, 120, 138, 0.9);",window_header_height:"40px",window_background_colour:"rgba(0,0,0,0.2)",ttBackground:"linear-gradient(180deg, rgba(255,255,255,1) 0%, rgba(250,250,250,1) 88%, rgba(248,248,248,1) 100%)",convertToInt:function(t){return parseInt(t.split("p")[0])}};t.exports=n},242:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n.n(a),r=n(10),i=n.n(r),c=n(14),s=n(6),l=n(7),d=n(77),u=n(11),p=n(12),h=n(22);n(96).config();var f=Object(h.b)({name:"env",initialState:{url:{}},reducers:{setUrl:function(t,e){t.url="http://localhost:5000",e.payload.includes("bevferle")&&(t.url="https://bevferle.herokuapp.com")}}}),b=f.actions.setUrl,x=f.reducer,g=n(21),m=n.n(g),j=n(26),v=n(73),y=n(38);var O,w,k,_,E,S=Object(h.b)({name:"windows",initialState:{value:[],windowRenderComponent:"Stream Graph",selectedWindow:"vis-window_0"},reducers:{addWindow:function(t,e){console.log(t,e),t.value=function(t,e){var n=t.slice();return n.splice(e.index,0,e.item),console.log(n,e),n}(t.value,{index:t.value.length,item:{id:"vis-window_"+t.value.length,windowComponent:e.payload}})},removeWindow:function(t,e){t.value=t.value.filter((function(t){return t.id!=e}))},setWindowRenderComponent:function(t,e){t.windowRenderComponent=e.payload}}}),R=S.actions,A=R.addWindow,C=(R.removeWindow,R.setWindowRenderComponent),T=S.reducer,D=Object(h.b)({name:"data",initialState:{streamData:{},heatData:{}},reducers:{setStreamData:function(t,e){t.streamData=e.payload},setHeatData:function(t,e){t.heatData=e.payload}}}),U=D.actions.setStreamData,B=D.reducer,z=Object(h.b)({name:"data",initialState:{granularity:"day",startTime:"00:00",endTime:"23:59",class:{"PRE-EURO":!0,EURO1:!0,EURO2:!0,EURO3:!0,EURO4:!0,EURO5:!0,EURO6:!0,ELECTRIC:!0},routes:""},reducers:{setClasses:function(t,e){t.class[e.payload]=!t.class[e.payload]},setReqGranularity:function(t,e){console.log(t,e),t.granularity=e.payload},setStartTime:function(t,e){t.startTime=e.payload},setEndTime:function(t,e){t.endTime=e.payload}}}),I=z.actions,X=I.setClasses,Y=I.setReqGranularity,L=I.setStartTime,M=I.setEndTime,V=z.reducer,F=Object(h.a)({reducer:{envVars:x,windows:T,data:B,filters:V}}),P=n(74),W=n(3),G=l.a.div(O||(O=Object(s.a)(["\n    background: white;\n    height: 35px;\n    width: 30%;\n    padding: 20px;\n    align-content: center;\n    align-items: center;\n    display: flex;\n    flex-direction: row;\n"]))),H=l.a.div(w||(w=Object(s.a)(["\n  background: var(--gradient-2);\n  width: 1%;\n  height: 100%;\n  padding: 15px;\n  "]))),K=l.a.text(k||(k=Object(s.a)(["\n    position: absolute;\n    align-self: center;\n    z-index: 51;\n    fill: #222;\n    color: #222;\n"]))),N=l.a.div(_||(_=Object(s.a)(["\n    position: fixed;\n    opacity: 0;\n    height: 100%;\n    width: 100%;\n    z-index: 50;\n    pointer-events: none;\n"]))),J=l.a.div(E||(E=Object(s.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: rgba(0,0,0,0.5);\n    height: 100%;\n    flex-direction: column;\n"])));function Z(){var t=Object(P.b)({loading:!0,loaderProps:{style:{color:"rgba(0,120,138,100)",padding:"10px"},valueText:"Fetching data..."},indicator:Object(W.jsx)(P.a,{width:"150"})}),e=t.containerProps,n=t.indicatorEl;return Object(W.jsx)(N,{children:Object(W.jsxs)(J,{children:[Object(W.jsxs)("section",Object(y.a)(Object(y.a)({},e),{},{children:[n," "]})),Object(W.jsxs)(G,{children:[Object(W.jsx)(H,{}),Object(W.jsx)(K,{})]})]})})}var q,Q,$,tt,et,nt=n(33),at=n(34),ot=n(57),rt=n(61),it=(n(223),n(20)),ct=l.a.div(q||(q=Object(s.a)(["\n    z-index: -1;\n    display: flex;\n    flex-direction: column;\n    top: 0px; left: 0;\n    background-color: ",";\n    height: 0;\n    width: ",";\n    opacity: 0;\n    transition: ease all 250ms;\n"])),it.side_menu_background,it.side_menu_width),st=Object(l.a)(ct)(Q||(Q=Object(s.a)(["\n  ","\n"])),(function(t){return t.open&&"\n    height: auto;\n    opacity: 1;\n  "})),lt=l.a.button($||($=Object(s.a)(["\n    font: 400 18px Roboto;\n    z-index: 1000;\n    color: ",";\n    padding: 0 0.6em;\n    height: 0px;\n    display: flex;\n    margin: 5px;\n    opacity: 1;\n    justify-content: left;\n    align-items: center;\n    box-shadow: none;\n    border-radius: 25px;\n    border: 1px solid ",";\n    user-select: none;\n    cursor: pointer;\n    transition: ease all 250ms;\n    background-color: rgba(255, 255, 255, 0.1);\n    &:hover {\n        background: ",";\n        color: ",";\n    }\n    &:disabled {\n        cursor: default;\n        opacity: 0.9;\n    }\n    -webkit-writing-mode: none;\n    text-rendering: none;\n    letter-spacing: none;\n    word-spacing: none;\n    text-transform: none;\n    text-indent: none;\n    text-shadow: none;\n"])),it.side_menu_text,it.background_colour,it.background_colour,it.text_colour);lt.defaultProps={theme:"blue"};var dt=Object(l.a)(lt)(tt||(tt=Object(s.a)(["\n  ","\n  ","\n"])),(function(t){return t.active&&"\n    opacity: 1;\n    background: ".concat(it.background_colour,"\n    color: ").concat(it.text_colour,";\n  ")}),(function(t){return t.open&&"\n    height: auto;\n    opacity: 1;\n  "})),ut=l.a.div(et||(et=Object(s.a)(["\n  width: 100%;\n  color: ",";\n  border-bottom: 1px solid ",";\n  font-weight: bold;\n  padding: 5px;\n"])),it.text_colour_neg,it.background_colour);function pt(t){var e=Object(p.c)();return Object(W.jsx)(dt,{active:t.active===t.type.label,open:t.open,onClick:function(n){t.setActive(t.type.label),e(C(n.target.innerHTML))},children:t.type.label})}function ht(t){var e=Object(a.useState)(0),n=Object(c.a)(e,2),o=n[0],r=n[1],i=ke.filter((function(e){return e.label===t.open}));return 0!=i.length?i[0].entries.map((function(e){return Object(W.jsx)(pt,{active:o,type:e,setActive:r,open:t.open})})):Object(W.jsx)(W.Fragment,{})}var ft,bt,xt,gt,mt,jt=function(t){Object(ot.a)(n,t);var e=Object(rt.a)(n);function n(t){return Object(nt.a)(this,n),e.call(this,t)}return Object(at.a)(n,[{key:"render",value:function(){return Object(W.jsxs)(st,{open:this.props.open===this.props.type.label,children:[Object(W.jsx)(ut,{children:"Select a visualisation:"}),Object(W.jsx)(ht,{open:this.props.open,active:this.props.active,setActive:this.props.setActive})]})}}]),n}(o.a.Component),vt=n(58),yt=n(20),Ot=l.a.button(ft||(ft=Object(s.a)(["\n    font: 400 18px Roboto;\n    z-index: 1000;\n    color: ",";\n    background: ","\n    width: ",";\n    height: 50px;\n    justify-content: left;\n    align-items: center;\n    padding: 0;\n    box-shadow: none;\n    border-right: 1px solid rgba(255, 255, 255, 0.3);\n    border-left: none;\n    border-top: 1px solid rgba(255, 255, 255, 0.3);\n    border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n    user-select: none;\n    cursor: pointer;\n    transition: ease all 250ms;\n    &:hover {\n        background: rgba(0, 120, 138, 0.7);\n    }\n    &:disabled {\n        cursor: default;\n        opacity: 0.9;\n    }\n    -webkit-writing-mode: none;\n    text-rendering: none;\n    letter-spacing: none;\n    word-spacing: none;\n    text-transform: none;\n    text-indent: none;\n    text-shadow: none;\n"])),yt.text_colour,yt.background_colour,yt.side_menu_width);Ot.defaultProps={theme:"blue"};var wt=Object(l.a)(Ot)(bt||(bt=Object(s.a)(["\n  ","\n"])),(function(t){return t.active&&"\n    height: auto;\n    opacity: 1;\n  "})),kt=Object(l.a)(vt.a)(xt||(xt=Object(s.a)(["\n    transform: translate(calc(100% - 10px), 0);\n"]))),_t=Object(l.a)(kt)(gt||(gt=Object(s.a)(["\n  ","\n"])),(function(t){return t.active&&"\n    transform: rotate(90deg);\n  "})),Et=l.a.div(mt||(mt=Object(s.a)(["\n  height: 50px;\n  text-align: left;\n  float: left;\n"])));var St,Rt,At,Ct,Tt,Dt,Ut,Bt=function(t){Object(ot.a)(n,t);var e=Object(rt.a)(n);function n(t){var a;return Object(nt.a)(this,n),(a=e.call(this,t)).state={dropdownTitle:""},a}return Object(at.a)(n,[{key:"render",value:function(){var t=this;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(wt,{active:this.props.active===this.props.type.label,onClick:function(){return(e=t).props.active===e.props.type.label?e.props.setActive(0):(e.setState({dropdownTitle:e.props.type.label}),e.props.setActive(e.props.type.label));var e},children:Object(W.jsxs)(Et,{children:[this.props.type.label,Object(W.jsx)(_t,{active:this.props.active===this.props.type.label})]})}),Object(W.jsx)(jt,{open:this.props.active,type:this.props.type,active:this.props.active,setActive:this.props.setActive,title:this.state.dropdownTitle})]})}}]),n}(o.a.Component),zt=n(105),It=n.n(zt),Xt=n(274),Yt=n(278);function Lt(t){var e=Object(a.useState)(t.defaultValue),n=Object(c.a)(e,2),o=n[0],r=n[1],i=Object(Xt.a)((function(t){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:t.spacing(1),marginRight:t.spacing(1),width:100}}}))();return Object(W.jsx)("form",{className:i.container,noValidate:!0,children:Object(W.jsx)(Yt.a,{id:t.id,label:t.label,type:"time",defaultValue:t.defaultValue,className:i.textField,InputLabelProps:{shrink:!0},inputProps:{step:300},onChange:function(e){r(e.target.value),t.onChange(e)},value:o})})}var Mt=n(20),Vt=l.a.div(St||(St=Object(s.a)(["\n  height: 50px;\n  width: 100%;\n  text-align: left;\n  float: left;\n"]))),Ft=l.a.div(Rt||(Rt=Object(s.a)(["\n    font: 400 18px Roboto;\n    z-index: 1000;\n    color: ",";\n    background: ","\n    width: ",";\n    height: 50px;\n    justify-content: center;\n    align-items: center;\n    padding: 0;\n    display: flex;\n    flex-direction: column;\n    box-shadow: none;\n    border-right: 1px solid rgba(255, 255, 255, 0.3);\n    border-left: none;\n    border-top: 1px solid rgba(255, 255, 255, 0.3);\n    border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n    user-select: none;\n    cursor: pointer;\n    transition: ease all 250ms;\n    &:hover {\n        background: rgba(0, 120, 138, 0.7);\n    }\n    &:disabled {\n        cursor: default;\n        opacity: 0.9;\n    }\n    -webkit-writing-mode: none;\n    text-rendering: none;\n    letter-spacing: none;\n    word-spacing: none;\n    text-transform: none;\n    text-indent: none;\n    text-shadow: none;\n"])),Mt.text_colour,Mt.background_colour,Mt.side_menu_width);Ft.defaultProps={theme:"blue"};var Pt,Wt,Gt,Ht=Object(l.a)(Ft)(At||(At=Object(s.a)(["\n  ","\n"])),(function(t){return t.active&&"\n    height: auto;\n    opacity: 1;\n  "})),Kt=l.a.div(Ct||(Ct=Object(s.a)(["\n    background: white;\n    height: 0px;\n    width: 100%;\n    display: flex;\n    transition: all ease 0.2s;\n    display: hidden;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: center;\n    opacity: 0;\n    color: ",";\n"])),Mt.text_colour_neg),Nt=Object(l.a)(Kt)(Tt||(Tt=Object(s.a)(["\n  ","\n"])),(function(t){return t.active&&"\n    height: auto;\n    opacity: 1;\n  "})),Jt=Object(l.a)(vt.a)(Dt||(Dt=Object(s.a)(["\n    transform: translate(calc(100% - 10px), 0);\n"]))),Zt=Object(l.a)(Jt)(Ut||(Ut=Object(s.a)(["\n  ","\n"])),(function(t){return t.active&&"\n    transform: rotate(90deg);\n  "}));function qt(t){var e=Object(a.useState)(!0),n=Object(c.a)(e,2),o=n[0],r=n[1];return Object(W.jsxs)(Ht,{active:o,children:[Object(W.jsxs)(Vt,{onClick:function(){return r(!o)},children:[t.label,Object(W.jsx)(Zt,{active:o})]}),Object(W.jsx)(Nt,{active:o,children:t.children})]})}var Qt,$t,te,ee=n(20),ne=l.a.input(Pt||(Pt=Object(s.a)(["\n    color: ","\n"])),ee.text_colour_neg),ae=l.a.label(Wt||(Wt=Object(s.a)(["\n    color: ","\n"])),ee.text_colour_neg),oe=l.a.div(Gt||(Gt=Object(s.a)(["\n    height: auto;\n    width: auto;\n    display: flex;\n    flex-direction: row;\n    padding: 2.5px;\n"])));function re(t){var e=Object(a.useState)(!0),n=Object(c.a)(e,2),o=n[0],r=n[1];return Object(W.jsxs)(oe,{children:[Object(W.jsx)(ne,{type:"checkbox",id:t.id,name:t.name,checked:o,onChange:function(e){r(!o),t.callback(e,o)}}),Object(W.jsx)(ae,{for:t.id,children:t.label})]})}var ie=n(20),ce=l.a.div(Qt||(Qt=Object(s.a)(["\n    display: flex;\n    // flex-direction: column;\n    flex-wrap: wrap;\n    justify-content: center;\n    width: 100%;\n    height: auto;\n    color: ","\n"])),ie.text_colour_neg),se=l.a.div($t||($t=Object(s.a)(["\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-evenly;\n    color: ","\n"])),ie.text_colour_neg),le=l.a.text(te||(te=Object(s.a)(["\n    display: flex;\n    color: ","\n    border-bottom: 1px solid ","\n    padding: 5px;\n    width: 100%;\n"])),ie.text_colour_neg,ie.background_colour);function de(t){var e=Object(p.c)(),n=Object(p.d)((function(t){return t.filters})),o=Object(a.useState)("day"),r=Object(c.a)(o,2),i=r[0],s=r[1];return Object(W.jsxs)(qt,{label:"Visualisation Filters",children:[Object(W.jsx)(le,{children:"Engine Classes:"}),Object(W.jsx)(ce,{id:"checkbox_engine-classes",children:void 0!=n?Object.keys(n.class).map((function(t){return Object(W.jsx)(re,{id:t,name:t,label:t,callback:function(t){e(X(t.target.name))}})})):null}),Object(W.jsx)(le,{children:"Granularity:"}),Object(W.jsx)(ce,{id:"checkbox_granularity",children:Object(W.jsx)(It.a,{options:["day","hour"],name:"granularity",isStateful:!1,onChange:function(t){s(t),e(Y(t))},value:i})}),Object(W.jsx)(le,{children:"Trips Between:"}),Object(W.jsxs)(se,{children:[Object(W.jsx)(Lt,{id:"start_time",label:"Start Time",defaultValue:"00:00",onChange:function(t){e(L(t.target.value))}}),Object(W.jsx)(Lt,{id:"end_time",label:"End Time",defaultValue:"23:59",onChange:function(t){e(M(t.target.value))}})]})]})}var ue,pe,he,fe,be,xe,ge,me,je,ve,ye=n(44),Oe=n(20),we=l.a.div(ue||(ue=Object(s.a)(["\n    transition: opacity 0.2s, width 0.2s;\n    z-index: 20000;\n    display: flex;\n    flex-direction: column;\n    top: 0px; left: 0;\n    width: ",";\n    opacity: 1;\n    background-color: ",";\n"])),Oe.side_menu_width,Oe.side_menu_background),ke=(Object(l.a)(we)(pe||(pe=Object(s.a)(["\n    ","\n"])),(function(t){return t.closed&&"\n        opacity: 0 !important;\n        width: 0%;\n        transition: width 0.5 linear;\n        "})),[{label:"Visualisation",entries:[{label:"Stream Graph",onClick:function(){}}]}]);Object(l.a)(ye.b)(he||(he=Object(s.a)(["\ntransform: translate(calc(100% - 10px), 0);\n"]))),Object(l.a)(ye.c)(fe||(fe=Object(s.a)(["\ntransform: translate(calc(100% - 10px), 0);\n"]))),Object(l.a)(ye.d)(be||(be=Object(s.a)(["\ntransform: translate(calc(100% - 10px), 0);\n"]))),Object(l.a)(ye.a)(xe||(xe=Object(s.a)(["\ntransform: translate(calc(100% - 10px), 0);\n"])));function _e(){var t=Object(a.useState)("Visualisation"),e=Object(c.a)(t,2),n=e[0],o=e[1];return Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)(we,{children:[ke.map((function(t){return Object(W.jsx)(Bt,{active:n,type:t,setActive:o})})),Object(W.jsx)(de,{})]})})}var Ee=n(20),Se=l.a.div(ge||(ge=Object(s.a)(["\n    // flex: 1 1 auto;\n    border: 2px rgba(0,0,0,0.4) solid;\n    box-shadow: 0px 0px 2px 3px ",";\n    width: 100%;\n    height: calc(100% - 300px);\n    display: flex;\n    flex-direction: column;\n\tmargin: 0;\n\tpadding: 0;\n\tz-index: 99;\n\tbackground: #fefefe;\n"])),Ee.window_background_colour),Re=l.a.div(me||(me=Object(s.a)(["\n    display: flex;\n    background-color: ",";\n    width: 100%;\n    height: ",";\n    cursor: all-scroll;\n    color: ",";\n    align-items: center;\n"])),Ee.window_background_colour,Ee.window_header_height,Ee.text_colour_neg),Ae=l.a.text(je||(je=Object(s.a)(["\n    font: 400 18px Roboto;\n    color: ",";\n    margin: 10px;\n"])),Ee.text_colour_neg);l.a.div(ve||(ve=Object(s.a)(["\n    background: #999;\n\topacity: 0.2;\n\n\twidth: 45%;\n\theight: 45%;\n\ttop: 20%;\n\tleft: 20%;\n\t\n\tposition: absolute;\n\tmargin: 0;\n\tpadding: 0;\n\tz-index: 98;\n\n\t-webkit-transition: all 0.25s ease-in-out;\n\t-moz-transition: all 0.25s ease-in-out;\n\t-ms-transition: all 0.25s ease-in-out;\n\t-o-transition: all 0.25s ease-in-out;\n    transition: all 0.25s ease-in-out;\n"])));var Ce,Te,De=Object(p.b)((function(t){return console.log(t),{selectedComponent:t.windows.windowRenderComponent,class:t.filters.class}}))((function(t){return Object(a.useEffect)((function(){})),Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(Se,{id:t.id,style:(e=t.height,void 0!=e?{height:e}:{}),children:Object(W.jsx)(Re,{children:Object(W.jsx)(Ae,{children:t.headerText})})})});var e})),Ue=n(8),Be=n(20),ze={createXAxis:function(t,e){return this.xScale=Ue.j().domain([new Date(2019,0,1),new Date(2019,11,10)]).range([0,this.graphBounds.xaxis]),this.gX=this.focus.append("g").attr("class","x").transition().duration(100).call(Ue.b(this.xScale)),this.gX.selectAll("text").attr("transform","rotate(45deg)").attr("text-anchor","start").attr("font-size","16px").attr("font-weight","bold").attr("y",10),this.focus.select(".x").append("text").attr("class","x-label").attr("font-size","16px").attr("font-weight","bold").style("text-anchor","start").style("fill","black").text(e),Ue.b(this.xScale)},drawXAxis:function(t,e,n){this.xScale.domain([new Date(2019,0,1),new Date(2019,11,10)]).range([0,this.graphBounds.xaxis]),this.gX=this.focus.select(".x").attr("class","x").attr("transform","translate(0,"+this.graphBounds.yaxis+")").call(this.xScale),this.gX.selectAll(".tick").attr("class","x-ticks").attr("y",25),this.focus.select(".x").selectAll("text").attr("text-anchor","start").attr("font-size","16px").attr("font-weight","bold").attr("y",10),this.focus.select(".x").append("text").attr("class","x-label").text(n)}},Ie={createYAxis:function(t,e){return this.yScale=Ue.i().range([this.graphBounds.yaxis,this.margin.top+this.margin.bottom]),this.gY=this.focus.append("g").attr("class","y").transition().duration(100).call(Ue.c(this.yScale)),this.gY.selectAll("text").attr("text-anchor","start").attr("transform","translate(-35, 0)").attr("font-size","14px").attr("font-weight","bold"),this.focus.select(".y").append("text").attr("transform","translate(-15, -5)").style("text-anchor","middle").text(e),Ue.c(this.yScale)},drawYAxis:function(t,e){this.yScale.domain([0,e]),this.gY=this.focus.select(".y").attr("class","y").call(this.yAxis),this.gY.selectAll("text").attr("text-anchor","start").attr("transform","translate(-35, 0)").attr("font-size","14px").attr("font-weight","bold"),this.focus.select(".y").append("text").attr("class","y-label").text(t)}},Xe=function(){function t(e,n,a,o){Object(nt.a)(this,t),this.containerId=e,this.title=n,this.xAxis=a,this.yAxis=o,this.margin={top:10,bottom:45,left:75,right:75},this.graphBounds={xaxis:0,yaxis:0},this.zoomable=!1}return Object(at.a)(t,[{key:"getContainer",value:function(){return this.container}},{key:"setContainer",value:function(t){this.container=t}},{key:"setZoomable",value:function(t){this.zoomable=t}},{key:"getTitle",value:function(){return this.title}},{key:"setTitle",value:function(t){this.title=t}},{key:"getXAxis",value:function(){return this.xAxis}},{key:"setXAxis",value:function(t){this.xAxis=t}},{key:"getYAxis",value:function(){return this.yAxis}},{key:"setYAxis",value:function(t){this.yAxis=t}},{key:"setG",value:function(){this.g=Ue.k("#".concat(this.containerId)).select(".focus").append("g").attr("id","plot")}},{key:"init",value:function(){var t="#".concat(this.containerId);Ue.k(t).select("#svg_parent_container").empty()||Ue.k(t).select("#svg_parent_container").remove(),this.svg=Ue.k(t).append("svg").attr("id","svg_parent_container"),this.width=Ue.k(t).node().offsetWidth,this.height=Ue.k(t).node().offsetHeight-this.margin.top-this.margin.bottom,this.graphBounds.xaxis=this.width-this.margin.left-this.margin.right,this.graphBounds.yaxis=this.height-Be.convertToInt(Be.window_header_height),this.svg.attr("width",this.width).attr("height",this.height),this.focus=this.svg.append("g").attr("class","focus").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.setG()}},{key:"applyStyle",value:function(t,e){var n=this.focus;t.forEach((function(t){n=n.select(t)}));for(var a=0,o=Object.keys(e);a<o.length;a++){var r=o[a];n.style(r,e[r])}}},{key:"applyStyleAll",value:function(t,e){var n=this.focus;t.forEach((function(t){n=n.selectAll(t)})),console.log(n);for(var a=0,o=Object.keys(e);a<o.length;a++){var r=o[a];console.log(r,e[r]),n.style(r,e[r])}}},{key:"draw",value:function(){this.init(),void 0!=this.getXAxis&&this.drawXAxis(this.getXAxis()),void 0!=this.getYAxis&&this.drawYAxis(this.getYAxis()),-1!=this.render()&&this.render()}},{key:"render",value:function(){return-1}},{key:"setData",value:function(t){this.data=t}}]),t}(),Ye=(n(20),{area:Ue.a(),setColorScheme:function(t){this.colorScheme=t},setKeys:function(t){this.keys=t},setStreamData:function(t){this.streamData=t},calcStackHeight:function(t,e){return t.map((function(t){var n=0;return Object.keys(t).forEach((function(a){e.includes(a)&&(n+=t[a])})),n}))},addBrushAndZoom:function(t,e){var n=Ue.d().extent([[0,0],[t.graphBounds.xaxis,t.graphBounds.yaxis]]).on("brush",(function(n,a){if(void 0==n.sourceEvent)return;var o=n.selection||t.xScale.range(),r=Ue.p.scale(e.graphBounds.xaxis/(o[1]-o[0])).translate(-o[0],0);e.focus.selectAll(".x-ticks").remove().exit(),e.xScale.domain(o.map(t.xScale.invert,t.xScale)),e.gX.call(e.xAxis.scale(r.rescaleX(e.xScale))),e.focus.select("#plot").attr("transform","translate("+r.x+") scale("+r.k+",1)"),e.gX.selectAll(".tick").selectAll("text").attr("text-anchor","start").attr("transform","translate(-35, 0)").attr("font-size","14px").attr("font-weight","bold")})),a=Ue.o().scaleExtent([1,1/0]).translateExtent([[0,0],[e.graphBounds.xaxis,e.graphBounds.yaxis]]).extent([[0,0],[e.graphBounds.xaxis,e.graphBounds.yaxis]]).on("zoom",(function(a,o){if(void 0==a.sourceEvent)return;var r=a.transform;e.focus.selectAll(".x-ticks").remove().exit(),e.gX.call(e.xAxis.scale(r.rescaleX(e.xScale))),t.focus.select(".brush").call(n.move,e.xScale.range().map(r.invertX,r)),e.focus.select("#plot").attr("transform","translate("+r.x+") scale("+r.k+",1)"),e.gX.selectAll(".tick").selectAll("text").attr("text-anchor","start").attr("transform","translate(-35, 0)").attr("font-size","14px").attr("font-weight","bold")}));t.focus.append("g").attr("class","brush").call(n).call(n.move,e.xScale.range()),e.focus.select("#plot").remove(),e.focus.append("clipPath").attr("id","zoom").append("rect").attr("x","0").attr("y","0").attr("width",e.graphBounds.xaxis).attr("height",e.graphBounds.yaxis),e.g=e.focus.append("g").attr("id","plot").attr("clip-path","url(#zoom)"),e.focus.select("#plot").call(a),this.enter(),this.render()},enter:function(){var t=this;this.stackedData=Ue.m().offset(Ue.n).keys(this.keys)(this.streamData);var e=Ue.g(this.calcStackHeight(this.streamData,this.keys));this.drawYAxis(0,e),this.blankArea=Ue.a().x((function(e){return t.xScale(new Date(e.data.date))})).y0((function(e){return t.height-t.margin.bottom})).y1((function(e){return t.height-t.margin.bottom})).curve(Ue.e),this.path=this.g.selectAll(".mylayers").data(this.stackedData),this.path.enter().append("path").attr("class","mylayers").on("mouseover",(function(t,e){})).on("mousemove",(function(t,e){Ue.k(this).attr("stroke","black")})).on("mouseout",(function(){t.g.selectAll(".mylayers").transition().attr("opacity",1),Ue.k(this).attr("stroke","none")})).attr("opacity",1).style("fill",(function(e){return t.colorScheme[e.key]})).attr("d",this.blankArea).attr("clip-path","url(#zoom)")},render:function(){var t=this,e=this,n=Ue.g(this.calcStackHeight(this.streamData,this.keys));this.yScale.domain([0,n]),this.focus.select(".y").call(Ue.c(this.yScale)),this.stackedData=Ue.m().offset(Ue.n).keys(this.keys)(this.streamData),this.area=Ue.a().x((function(t,n){return e.xScale(new Date(t.data.date))})).y0((function(t){return e.yScale(t[0])})).y1((function(t){return e.yScale(t[1])})).curve(Ue.e),this.path=this.g.selectAll(".mylayers").data(this.stackedData),this.path.join((function(t){return t}),(function(t){return t}),(function(e){return e.attr("d",t.area).remove()})).transition().duration(600).ease(Ue.f).attr("delay","1000").attr("d",this.area).style("fill",(function(t){return e.colorScheme[t.key]})).attr("clip-path","url(#zoom)")}}),Le=n(15),Me=n(20),Ve={tooltipKeys:"",setTooltipKeys:function(t){this.tooltipKeys=t},createBars:function(){var t=this,e=new Date(this.data[0].date),n=new Date(this.data[0].date);n.setDate(n.getDate()+1);var a=this.xScale(n)-this.xScale(e);this.ttBars=this.focus.selectAll(".plot-rect").remove().exit().data(this.streamData).enter().append("rect").attr("class","plot-rect").on("mouseover",(function(){})).attr("x",(function(e){return t.xScale(new Date(e.date))})).attr("width",(function(t,e){return a})).attr("height",1).attr("border","1px solid black").style("fill","white").style("opacity",0)},updateBars:function(){var t=this,e=new Date(this.data[0].date),n=new Date(this.data[0].date);n.setDate(n.getDate()+1);var a=this.xScale(n)-this.xScale(e);this.ttBars=this.ttBars.selectAll(".plot-rect").data(this.streamData,(function(t){return t.date})),this.ttBars.enter().append("rect").join(this.ttBars).merge(this.ttBars).attr("class","plot-rect").attr("x",(function(e){return t.xScale(new Date(e.date))})).attr("width",(function(t,e){return a})).attr("height",1).attr("border","1px solid black").style("fill","white").style("opacity",0)},createLineChartTooltip:function(t,e,n,a){var o=t.pageX+5,r=t.pageY+5;Ue.k("#".concat(this.containerId)).insert("div",":first-child").attr("id",n).attr("width","100px").attr("height","100px").style("background",Me.ttBackground).style("padding","10px").style("cursor","none").style("border","1px ".concat(Me.background_colour," solid")).style("display","inline-block").style("position","absolute").style("left",o+"px").style("top",r+"px").html("<p>"+e.date.toString().split(/[0-9]{2}:/)[0]+"</p><p> "+a+' </p><br><span class="toolTip__vehicle-dot_el"></span> ELECTRIC : '+Math.round(100*e.ELECTRIC)/100+'<br><span class="toolTip__vehicle-dot_EURO6"></span> EURO6 : '+Math.round(100*e.EURO6)/100+'<br><span class="toolTip__vehicle-dot_EURO5"></span> EURO5 : '+Math.round(100*e.EURO5)/100+'<br><span class="toolTip__vehicle-dot_EURO4"></span> EURO4 : '+Math.round(100*e.EURO4)/100+'<br><span class="toolTip__vehicle-dot_EURO3"></span> EURO3 : '+Math.round(100*e.EURO3)/100+'<br><span class="toolTip__vehicle-dot_EURO2"></span> EURO2 : '+Math.round(100*e.EURO2)/100)},drawLineChartTooltip:function(t,e,n,a){var o=t.pageX+5,r=t.pageY+5,i=e.date.toString();"00:00:00"===i.split(" ")[4]&&(i=e.date.toString().split(/[0-9]{2}:/)[0]),Ue.k("#".concat(this.containerId)).select("#".concat(n)).style("background",Me.ttBackground).style("display","inline-block").style("left",o+"px").style("top",r+"px").html("<p>"+i+"</p><p> "+a+' </p><br><span class="toolTip__vehicle-dot_el"></span> ELECTRIC : '+Math.round(100*e.ELECTRIC)/100+'<br><span class="toolTip__vehicle-dot_EURO6"></span> EURO6 : '+Math.round(100*e.EURO6)/100+'<br><span class="toolTip__vehicle-dot_EURO5"></span> EURO5 : '+Math.round(100*e.EURO5)/100+'<br><span class="toolTip__vehicle-dot_EURO4"></span> EURO4 : '+Math.round(100*e.EURO4)/100+'<br><span class="toolTip__vehicle-dot_EURO3"></span> EURO3 : '+Math.round(100*e.EURO3)/100+'<br><span class="toolTip__vehicle-dot_EURO2"></span> EURO2 : '+Math.round(100*e.EURO2)/100)},addTooltipToSvg:function(t,e){var n=this.graphBounds.xaxis/this.streamData.length,a=this;this.focus.on("mousemove",(function(o){var r,i=!1,c=Object(Le.a)(a.streamData);try{var s=function(){var c=r.value;if(Ue.h(o)[0]>a.xScale(new Date(c.date))&&Ue.h(o)[0]<a.xScale(new Date(c.date))+n){i=!0;var s,l=a.streamData.filter((function(t){return new Date(t.date).getTime()===new Date(c.date).getTime()}))[0],d=[],u=Object(Le.a)(a.tooltipKeys);try{for(u.s();!(s=u.n()).done;){var p=s.value;d.push({emissions:l[p],engine:p})}}catch(h){u.e(h)}finally{u.f()}Ue.k("#".concat(a.containerId)).select("#".concat(t)).empty()?(a.createLineChartTooltip(o,c,t,e),Ue.k("body").selectAll(".plot-rect").filter((function(t){return t.date===c.date})).attr("height",a.graphBounds.yaxis).style("opacity",.4)):(a.drawLineChartTooltip(o,c,t,e),Ue.k("body").selectAll(".plot-rect").attr("height",1).style("opacity",0),Ue.k("body").selectAll(".plot-rect").filter((function(t){return t.date===c.date})).attr("height",a.graphBounds.yaxis).style("opacity",.4))}};for(c.s();!(r=c.n()).done;)s()}catch(l){c.e(l)}finally{c.f()}!1===i&&(Ue.k("body").select("#".concat(t)).attr("fill","none").style("display","none"),Ue.k("body").selectAll(".plot-rect").attr("height",1).style("opacity",0))})).on("mouseout",(function(e){Ue.k("#".concat(a.containerId)).select("#".concat(t)).empty()||(Ue.k("#".concat(t)).attr("fill","none").style("display","none"),Ue.l(".plot-rect").attr("height",1).style("opacity",0))})).on("mouseleave",(function(e){Ue.k("#".concat(a.containerId)).select("#".concat(t)).empty()||(Ue.k("#".concat(t)).attr("fill","none").style("display","none"),Ue.l(".plot-rect").attr("height",1).style("opacity",0))}))}},Fe=n(98);function Pe(t){var e=F.getState().filters,n=["date"].concat(Fe.engine_types);n=n.filter((function(t){return e.class[t]||"date"===t}));var a=[];t.forEach((function(t){if(n.includes(t.engine_type)){var e={};e.date=t.date,e[t.engine_type]=t.co2,a.push(e)}}));var o=[],r=Array.from(new Set(a.map((function(t){return t.date}))));r.sort((function(t,e){return new Date(t).getTime()>new Date(e).getTime()?1:new Date(t).getTime()<new Date(e).getTime()?-1:0}));for(var i=function(){var t=s[c],e={};n.forEach((function(n){e[n]=0,"date"===n&&(e[n]=t)})),o.push(e)},c=0,s=r;c<s.length;c++)i();for(var l=0,d=o;l<d.length;l++){var u,p=d[l],h=Object(Le.a)(a);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(p.date===f.date){var b=Object.keys(f)[1];p[b]=f[b]}}}catch(x){h.e(x)}finally{h.f()}}return o}var We=n(98),Ge=l.a.div(Ce||(Ce=Object(s.a)(["\n    display: flex;\n    flex: 1 1 auto;\n    height: 100%;\n    overflow: hidden;\n"]))),He=Object(l.a)(Ge)(Te||(Te=Object(s.a)(["\n    flex-direction: column;\n    overflow-y: auto;\n"])));var Ke,Ne,Je,Ze,qe,Qe,$e=n.p+"static/media/GW_Logo.59e7ae2d.png",tn=l.a.img(Ke||(Ke=Object(s.a)(["\n  height: 45px;\n  border-right: 1px solid rgba(255, 255, 255, 0.3);\n  padding-left: 40px;\n  padding-right: 105px;\n"])));n(96).config();var en=n(20),nn=[{label:"Home",to:"/",component:""},{label:"Tutorial - User Interface",to:"/tut1",component:""},{label:"Tutorial - Visualisations",to:"/tut2",component:""},{label:"BEVis Tool",to:"/visualisations",component:function(t){var e=Object(p.c)(),n=Object(p.d)((function(t){return t.envVars.url})),o=Object(p.d)((function(t){return t.data.streamData})),r=Object(p.d)((function(t){return t.windows})),i=Object(p.d)((function(t){return t.filters.granularity})),c=Object(p.d)((function(t){return t.filters.class})),s=Object(p.d)((function(t){return t.filters.startTime})),l=Object(p.d)((function(t){return t.filters.endTime}));function d(t){return"overview_window"!=t?u(t,ze,Ie,Ye,Ve):u(t,ze,Ie,Ye)}function u(t){for(var e=new Xe(t),n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];for(var r=0,i=a;r<i.length;r++){var c=i[r];Object.assign(e,c)}return e}function h(t){if(void 0!=t){var e=t.props.renderedComponent;if(e.init(),e.setData(o),e.setColorScheme(We.engine_colours),e.setKeys(We.engine_types),e.setStreamData(Pe(o)),e.setXAxis(e.createXAxis([new Date(2019,0,1),new Date(2019,11,10)],"Yes")),e.drawXAxis(e.getXAxis(),0,[new Date(2019,0,1),new Date(2019,11,10)]),e.setYAxis(e.createYAxis([0,0],"Yes")),e.enter(),e.render(),"overview_window"!=t.props.id)e.setTooltipKeys(We.engine_types),e.addTooltipToSvg("tt-main","CO2"),e.createBars();else{var n=F.getState().windows.value[0].windowComponent.props.renderedComponent,a=F.getState().windows.value[1].windowComponent.props.renderedComponent;n.addBrushAndZoom(a,n)}}}function f(t){r.value.forEach((function(e){return function(t,e){var n=t.props.renderedComponent;n.setData(e),n.setStreamData(Pe(e)),n.enter(),n.render()}(e.windowComponent,t)}))}return Object(a.useEffect)((function(){function t(){return(t=Object(v.a)(m.a.mark((function t(){var a,o,r,c,u,p;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"2019-01-01","2019-12-10",o=encodeURI("".concat(n,"/").concat(i,"/wellington/").concat("2019-01-01","/").concat("2019-12-10","/").concat(s,"/").concat(l)),t.next=4,fetch(o);case 4:return r=t.sent,t.next=7,r.json();case 7:c=t.sent,e(U(c)),u=Object(W.jsx)(De,{id:"vis-window_0",renderedComponent:d("vis-window_0")},"vis-window_0"),e(A(u)),p=Object(W.jsx)(De,(a={id:"overview_window"},Object(j.a)(a,"id","overview_window"),Object(j.a)(a,"renderedComponent",d("overview_window")),a)),e(A(p));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){function t(){return(t=Object(v.a)(m.a.mark((function t(){var a,o,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"2019-01-01","2019-12-10",a=encodeURI("".concat(n,"/").concat(i,"/wellington/").concat("2019-01-01","/").concat("2019-12-10","/").concat(s,"/").concat(l)),t.next=4,fetch(a);case 4:return o=t.sent,t.next=7,o.json();case 7:r=t.sent,console.log("NEW JSON DATA: ",r),e(U(r)),f(r);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[i,s,l]),Object(a.useEffect)((function(){r.value.map((function(t){var e=t.windowComponent.props.renderedComponent;console.log(Pe(o)),e.setStreamData(Pe(o)),e.render()}))}),[c]),Object(a.useEffect)((function(){!function(){var t=F.getState().windows.windowRenderComponent;"Stream Graph"===t&&r.value.forEach((function(t){return h(t.windowComponent)})),"Heat Chart"===t&&r.value.forEach((function(t){return h(t.windowComponent)}))}()}),[r]),Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)(Ge,{children:[Object(W.jsx)(Z,{}),Object(W.jsx)(_e,{}),Object(W.jsx)(He,{children:Object(p.d)((function(t){return t.windows})).value.map((function(t){return Object(W.jsx)(De,{id:t.windowComponent.props.id,renderedComponent:t.windowComponent.props.renderedComponent},t.windowComponent.props.id)}))})]})})}},{label:"User Study",to:"/tut1",component:""}],an=l.a.button(Ne||(Ne=Object(s.a)(["\n  font: 400 18px Roboto;\n  z-index: 1000;\n  color: ",";\n  background: ","\n  padding: 0 0.6em;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: none;\n  border-right: 1px solid rgba(255, 255, 255, 0.3);\n  border-left: none;\n  border-top: none;\n  border-bottom: none;\n  user-select: none;\n  cursor: pointer;\n  transition: ease background-color 250ms;\n  &:hover {\n    background: rgba(255, 255, 255, 0.164);\n  }\n  &:disabled {\n    cursor: default;\n    opacity: 0.9;\n  }\n  -webkit-writing-mode: none;\ntext-rendering: none;\nletter-spacing: none;\nword-spacing: none;\ntext-transform: none;\ntext-indent: none;\ntext-shadow: none;\n"])),en.text_colour,en.background_colour);an.defaultProps={theme:"blue"};var on=Object(l.a)(an)(Je||(Je=Object(s.a)(["\n\n  ","\n"])),(function(t){return t.active&&"\n    opacity: 1;\n    background-color: rgba(255, 255, 255, 0.1);\n  "})),rn=l.a.div(Ze||(Ze=Object(s.a)(["\n  height: ",";\n  width: 100%;\n  padding: 0px 10px;\n  align-items: center;\n  justify-content: left;\n  z-index: 1;\n  position: relative;\n  box-shadow: var(--container-shadow);\n  background: transparent url(./imgs/banner.jpg);\n  background-color: ","\n  grid-column-start: 1;\n  grid-column-end: 3;\n  display: flex;\n  flex-flow: row nowrap;\n"])),en.header_height,en.background_colour),cn=Object(l.a)(d.b)(qe||(qe=Object(s.a)(["\n  text-decoration: none;\n  height: 100%;\n"]))),sn=l.a.main(Qe||(Qe=Object(s.a)(["\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n"])));function ln(){var t=Object(p.c)(),e=Object(a.useState)(nn[0]),n=Object(c.a)(e,2),o=n[0],r=n[1];return console.log(window.location.href),t(b(window.location.href)),dn(),Object(W.jsx)(d.a,{children:Object(W.jsxs)(sn,{children:[Object(W.jsx)("nav",{children:Object(W.jsxs)(rn,{id:"header",children:[Object(W.jsx)(tn,{src:$e}),nn.map((function(t){return Object(W.jsx)(cn,{to:t.to,children:Object(W.jsx)(on,{active:o===t.label,onClick:function(){return r(t.label)},children:t.label})})}))]})}),Object(W.jsxs)(u.c,{children:[nn.map((function(t){return Object(W.jsx)(u.a,{path:t.to,exact:!0,component:t.component})})),Object(W.jsx)(u.a,{render:function(){return Object(W.jsx)("h1",{children:"404: page not found"})}})]})]})})}var dn=function(){for(var t in en.body)document.body.style[t]=en.body[t]};i.a.render(Object(W.jsx)(p.a,{store:F,children:Object(W.jsx)(ln,{})}),document.getElementById("root"))},98:function(t,e){t.exports={engine_colours:{ELECTRIC:"#3cc0fd",EURO6:"#a3f383",EURO5:"#e2f750",EURO4:"#fdad0f",EURO3:"#717C71",EURO2:"#4F4537",EURO1:"#292121","PRE-EURO":"#ff0000"},engine_types:["PRE-EURO","EURO1","EURO2","EURO3","EURO4","EURO5","EURO6","ELECTRIC"]}}},[[242,1,2]]]);
//# sourceMappingURL=main.ffb290ba.chunk.js.map