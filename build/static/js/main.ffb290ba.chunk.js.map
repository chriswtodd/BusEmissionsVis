{"version":3,"sources":["styles.js","redux/envVarsSlice.js","redux/windowSlice.js","redux/helpers.js","redux/dataSlice.js","redux/filterSlice.js","redux/store.js","components/loadingBar.js","components/sideMenuDropDown.js","components/sideMenuButton.js","components/materialUi/TimePicker.js","components/sideMenuContainer.js","components/html/checkbox.js","components/sideMenuFilters.js","components/sideMenuLeft.js","components/window-component.js","d3/graph.js","d3/streamGraphMixin.js","d3/tooltipMixin.js","models/streamModel.js","views/visualisations.js","components/GW_Logo.png","App.js","index.js","models/modelData.js"],"names":["styles","background_colour","text_colour","text_colour_neg","body","html","height","header_height","side_menu_width","side_menu_background","side_menu_text","drop_down_header_background","window_header_height","window_background_colour","ttBackground","convertToInt","styleString","parseInt","split","module","exports","require","config","envVarsSlice","createSlice","name","initialState","url","reducers","setUrl","state","payload","process","includes","actions","envVarReducer","reducer","windowSlice","value","windowRenderComponent","selectedWindow","addWindow","console","log","array","action","newArray","slice","splice","index","item","insertItem","length","id","windowComponent","removeWindow","div_id","filter","d","setWindowRenderComponent","streamDataSlice","streamData","heatData","setStreamData","setHeatData","streamDataReducer","filterSlice","granularity","startTime","endTime","class","routes","setClasses","setReqGranularity","setStartTime","setEndTime","filterReducer","configureStore","envVars","windows","windowsReducer","data","filters","LoadingBarContainer","styled","div","LoadingBarProgress","LoadingBarPercent","text","LoadingWrapper","LoadingContainer","LoadingBar","useLoading","loading","loaderProps","style","color","padding","valueText","indicator","width","containerProps","indicatorEl","Container","ContainerToggle","open","DropDownButton","button","defaultProps","theme","DropDownButtonToggle","active","SectionSeparator","DropDownButtonFactory","props","dispatch","useDispatch","type","label","onClick","e","setActive","target","innerHTML","PopulateItems","useState","buttons","entries","map","SideMenuDropDown","this","React","Component","Button","MenuButtonToggle","ButtonArrow","IoIosArrowForward","ButtonArrowToggle","Header","ButtonFactory","dropdownTitle","component","setState","title","TimePickers","defaultValue","time","setTime","classes","makeStyles","container","display","flexWrap","textField","marginLeft","spacing","marginRight","className","noValidate","TextField","InputLabelProps","shrink","inputProps","step","onChange","MenuContainerToggle","MenuBody","MenuBodyToggle","ContainerArrow","ContainerArrowToggle","SideMenuContainer","children","InputCheckbox","input","Label","Checkbox","checked","setChecked","callback","for","CheckboxContainer","TimePickerContainer","SectionLabel","SideMenuFilters","useSelector","setGranularity","undefined","Object","keys","property","options","isStateful","checkedValue","MenuContainer","closed","FaDatabase","FaEye","FaTools","FaCog","SideMenuLeft","HeaderText","connect","selectedComponent","useEffect","headerText","axisDateMixin","createXAxis","xRange","xScale","d3","domain","Date","range","graphBounds","xaxis","gX","focus","append","attr","transition","duration","call","selectAll","select","drawXAxis","axis","yaxis","axisContinuousMixin","createYAxis","yRange","yScale","margin","top","bottom","gY","drawYAxis","yMax","yAxis","D3Graph","containerId","xAxis","left","right","zoomable","g","concat","empty","remove","svg","node","offsetWidth","offsetHeight","setG","selectors","styleObj","element","forEach","selector","init","getXAxis","getYAxis","render","streamGraphMixin","area","setColorScheme","colorScheme","setKeys","calcStackHeight","stack","stackKeys","sum","key","addBrushAndZoom","brushedGraph","zoomedGraph","brush","extent","on","event","sourceEvent","s","selection","t","scale","translate","exit","invert","rescaleX","x","k","zoom","scaleExtent","Infinity","translateExtent","transform","move","invertX","enter","stackedData","offset","blankArea","date","y0","y1","curve","path","i","join","update","ease","streamTooltipFactoryMixin","tooltipKeys","setTooltipKeys","createBars","currentDay","nextDay","setDate","getDate","widthTooltipBars","ttBars","updateBars","merge","createLineChartTooltip","infoDots","pageX","pageY","insert","toString","Math","round","drawLineChartTooltip","ttName","timeStamp","addTooltipToSvg","ttTitle","onDot","getTime","engineTypesEmissions","push","emissions","engine","modelData","processStreamData","store","getState","engine_types","drawData","engine_type","obj","final","reducedDates","Array","from","Set","sort","a","b","newObj","PageContainer","PageContainerVertical","Logo","img","getRenderedComponentFunction","windowId","createGraph","d3Graph","d3StreamGraph","graph","mixins","mixin","assign","createStreamGraph","window","vis","renderedComponent","setData","engine_colours","setXAxis","setYAxis","w1","w2","redrawGraphs","newData","renderStreamGraph","fetchURL","encodeURI","fetch","res","json","firstWindow","overview","fetchData","graphToDraw","initGraphs","ButtonToggle","LinkUnstyled","Link","MainFlex","main","App","location","href","componentWillMount","src","logo","to","exact","document","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.ffb290ba.chunk.js","sourcesContent":["let styles = {\r\n    background_colour: \"rgba(0, 120, 138, 0.9);\",\r\n    text_colour: \"rgb(248, 248, 248);\",\r\n    text_colour_neg: \"rgb(50, 50, 50);\",\r\n    body : {\r\n        \"margin\": 0,\r\n        \"height\": \"100%\",\r\n        \"width\": \"100%\",\r\n        \"font-family\": \"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif\",\r\n        \"-webkit-font-smoothing\": \"antialiased\",\r\n        \"-moz-osx-font-smoothing\": \"grayscale\"\r\n    },\r\n    html : {\r\n        height: \"100%\"\r\n    },\r\n    header_height: \"50px\",\r\n    // *************** SIDE MENU STYLES *****************\r\n    side_menu_width: \"300px\",\r\n    side_menu_background: \"rgba(250, 250, 250, 1)\",\r\n    side_menu_text: \"rgba(50, 50, 50, .8)\",\r\n    drop_down_header_background: \"rgba(0, 120, 138, 0.9);\",\r\n    window_header_height: \"40px\",\r\n    window_background_colour: \"rgba(0,0,0,0.2)\",\r\n    ttBackground: \"linear-gradient(180deg, rgba(255,255,255,1) 0%, rgba(250,250,250,1) 88%, rgba(248,248,248,1) 100%)\",\r\n    convertToInt(styleString) {\r\n        return parseInt(styleString.split(\"p\")[0]);\r\n    }\r\n};\r\n\r\nmodule.exports = styles;","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport { createSlice } from '@reduxjs/toolkit';\r\nrequire('dotenv').config()\r\n\r\nexport const envVarsSlice = createSlice({\r\n    name: 'env',\r\n    initialState: {\r\n        url: {},\r\n    },\r\n    reducers: {\r\n        setUrl: (state, payload) => {\r\n            state.url = process.env.REACT_APP_DEV_URL;\r\n            if (payload.payload.includes(\"bevferle\")) {\r\n                state.url = process.env.REACT_APP_DEPLOYMENT_URL;\r\n            }\r\n        },\r\n    }\r\n})\r\n\r\nexport const { setUrl } = envVarsSlice.actions;\r\nexport const envVarReducer = envVarsSlice.reducer;","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport { createSlice, createReducer } from '@reduxjs/toolkit';\r\nimport { insertItem, removeItem } from '../redux/helpers.js';\r\n\r\nexport const windowSlice = createSlice({\r\n    name: 'windows',\r\n    initialState: {\r\n        value: [],\r\n        windowRenderComponent: \"Stream Graph\",\r\n        selectedWindow: \"vis-window_0\",\r\n    },\r\n    reducers: {\r\n        addWindow: (state, payload) => {\r\n            console.log(state, payload);\r\n            state.value = insertItem(state.value, {\r\n                index: state.value.length,\r\n                item: {\r\n                    id:\"vis-window_\"+state.value.length,\r\n                    windowComponent: payload.payload,\r\n                }\r\n            })\r\n        },\r\n        removeWindow: (state, div_id) => {\r\n            state.value = state.value.filter((d) => {\r\n                return d.id != div_id;\r\n            })\r\n        },\r\n        setWindowRenderComponent: (state, action) => {\r\n            state.windowRenderComponent = action.payload;\r\n        }\r\n    }\r\n})\r\n\r\nexport const { addWindow, removeWindow, setWindowRenderComponent } = windowSlice.actions;\r\n\r\nexport default windowSlice.reducer","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nexport function insertItem(array, action) {\r\n    let newArray = array.slice()\r\n    newArray.splice(action.index, 0, action.item)\r\n    console.log(newArray, action);\r\n    return newArray\r\n}\r\n\r\n\r\nexport function removeItem(array, action) {\r\n    return array.filter((item, index) => index !== action.index)\r\n}\r\n\r\nexport function updateObjectInArray(array, action) {\r\n    return array.map((item, index) => {\r\n      if (index !== action.index) {\r\n        // This isn't the item we care about - keep it as-is\r\n        return item\r\n      }\r\n  \r\n      // Otherwise, this is the one we want - return an updated value\r\n      return {\r\n        ...item,\r\n        ...action.item\r\n      }\r\n    })\r\n  }\r\n\r\nexport function observeStore(currentState, store, select, onChange) {\r\n  function handleChange() {\r\n    let nextState = select(store.getState());\r\n    if (nextState !== currentState) {\r\n      currentState = nextState;\r\n      onChange(currentState);\r\n    }\r\n  }\r\n\r\n  let unsubscribe = store.subscribe(handleChange);\r\n  handleChange();\r\n  return unsubscribe;\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport { createSlice } from '@reduxjs/toolkit';\r\n\r\nexport const streamDataSlice = createSlice({\r\n    name: 'data',\r\n    initialState: {\r\n        streamData: {},\r\n        heatData: {},\r\n    },\r\n    reducers: {\r\n        setStreamData: (state, payload) => {\r\n            state.streamData = payload.payload;\r\n        },\r\n        setHeatData: (state, payload) => {\r\n            state.heatData = payload.payload;\r\n        },\r\n    }\r\n})\r\n\r\nexport const { setStreamData } = streamDataSlice.actions;\r\nexport const streamDataReducer = streamDataSlice.reducer;","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport { createSlice } from '@reduxjs/toolkit';\r\n\r\nexport const filterSlice = createSlice({\r\n    name: 'data',\r\n    initialState: {\r\n        granularity: \"day\",\r\n        startTime: \"00:00\",\r\n        endTime: \"23:59\",\r\n        class: {\r\n          \"PRE-EURO\" : true,\r\n          \"EURO1\" : true,\r\n          \"EURO2\" : true,\r\n          \"EURO3\" : true,\r\n          \"EURO4\" : true,\r\n          \"EURO5\" : true,\r\n          \"EURO6\" : true,\r\n          \"ELECTRIC\" : true,\r\n        },\r\n        routes: \"\",\r\n    },\r\n    reducers: {\r\n        setClasses: (state, payload) => {\r\n            state.class[payload.payload] = !state.class[payload.payload];\r\n        },\r\n        setReqGranularity: (state, payload) => {\r\n            console.log(state, payload);\r\n            state.granularity = payload.payload\r\n        },\r\n        setStartTime: (state, payload) => {\r\n            state.startTime = payload.payload;\r\n        },\r\n        setEndTime: (state, payload) => {\r\n            state.endTime = payload.payload;\r\n        }\r\n    }\r\n})\r\n\r\nexport const { setClasses, setReqGranularity, setStartTime, setEndTime } = filterSlice.actions;\r\nexport const filterReducer = filterSlice.reducer;","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport { configureStore } from '@reduxjs/toolkit';\r\nimport windowsReducer from '../redux/windowSlice.js';\r\nimport { streamDataReducer } from '../redux/dataSlice.js';\r\nimport { filterReducer } from '../redux/filterSlice';\r\nimport { envVarReducer } from './envVarsSlice.js';\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    envVars: envVarReducer,\r\n      windows: windowsReducer,\r\n      data: streamDataReducer,\r\n      filters: filterReducer,\r\n  },\r\n})","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React, { useState } from 'react';\r\nimport styled from \"styled-components\";\r\nimport { useLoading, Circles } from '@agney/react-loading';\r\n\r\n\r\nconst LoadingBarContainer = styled.div`\r\n    background: white;\r\n    height: 35px;\r\n    width: 30%;\r\n    padding: 20px;\r\n    align-content: center;\r\n    align-items: center;\r\n    display: flex;\r\n    flex-direction: row;\r\n`;\r\n\r\nconst LoadingBarProgress = styled.div`\r\n  background: var(--gradient-2);\r\n  width: 1%;\r\n  height: 100%;\r\n  padding: 15px;\r\n  `;\r\n\r\nconst LoadingBarPercent = styled.text`\r\n    position: absolute;\r\n    align-self: center;\r\n    z-index: 51;\r\n    fill: #222;\r\n    color: #222;\r\n`;\r\n\r\nconst LoadingWrapper = styled.div`\r\n    position: fixed;\r\n    opacity: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    z-index: 50;\r\n    pointer-events: none;\r\n`;\r\n\r\nconst LoadingContainer = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background: rgba(0,0,0,0.5);\r\n    height: 100%;\r\n    flex-direction: column;\r\n`;\r\n\r\nexport default function LoadingBar() {\r\n    const { containerProps, indicatorEl } = useLoading({\r\n        loading: true,\r\n        loaderProps: {\r\n            // Any props here would be spread on to the indicator element.\r\n            style: { color: 'rgba(0,120,138,100)', padding: '10px' },\r\n            valueText: \"Fetching data...\"\r\n          },\r\n        indicator: <Circles width=\"150\" />,\r\n      });\r\n\r\n    return (\r\n        <LoadingWrapper>\r\n            <LoadingContainer>\r\n                <section {...containerProps}>\r\n                    {indicatorEl} {/* renders only while loading */}\r\n                </section>\r\n                <LoadingBarContainer>\r\n                    <LoadingBarProgress>\r\n                    </LoadingBarProgress>\r\n                    <LoadingBarPercent>\r\n                    </LoadingBarPercent>\r\n                </LoadingBarContainer>\r\n            </LoadingContainer>\r\n        </LoadingWrapper>\r\n    )\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React, { useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setWindowRenderComponent, addWindow } from '../redux/windowSlice.js';\r\n\r\nimport styled from \"styled-components\";\r\nimport TimePicker from 'react-time-picker';\r\n\r\nimport { buttons } from './sideMenuLeft.js';\r\n\r\nlet styles = require('../styles.js');\r\n\r\nconst Container = styled.div`\r\n    z-index: -1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    top: 0px; left: 0;\r\n    background-color: ${styles.side_menu_background};\r\n    height: 0;\r\n    width: ${styles.side_menu_width};\r\n    opacity: 0;\r\n    transition: ease all 250ms;\r\n`;\r\n\r\n//Set button to change colour on active change\r\nconst ContainerToggle = styled(Container)`\r\n  ${({ open }) =>\r\n    open &&\r\n    `\r\n    height: auto;\r\n    opacity: 1;\r\n  `}\r\n`;\r\n\r\nconst DropDownButton = styled.button`\r\n    font: 400 18px Roboto;\r\n    z-index: 1000;\r\n    color: ${styles.side_menu_text};\r\n    padding: 0 0.6em;\r\n    height: 0px;\r\n    display: flex;\r\n    margin: 5px;\r\n    opacity: 1;\r\n    justify-content: left;\r\n    align-items: center;\r\n    box-shadow: none;\r\n    border-radius: 25px;\r\n    border: 1px solid ${styles.background_colour};\r\n    user-select: none;\r\n    cursor: pointer;\r\n    transition: ease all 250ms;\r\n    background-color: rgba(255, 255, 255, 0.1);\r\n    &:hover {\r\n        background: ${styles.background_colour};\r\n        color: ${styles.text_colour};\r\n    }\r\n    &:disabled {\r\n        cursor: default;\r\n        opacity: 0.9;\r\n    }\r\n    -webkit-writing-mode: none;\r\n    text-rendering: none;\r\n    letter-spacing: none;\r\n    word-spacing: none;\r\n    text-transform: none;\r\n    text-indent: none;\r\n    text-shadow: none;\r\n`;\r\n\r\nDropDownButton.defaultProps = {\r\n  theme: \"blue\"\r\n};\r\n\r\n//Set button to change colour on active change\r\nconst DropDownButtonToggle = styled(DropDownButton)`\r\n  ${({ active }) =>\r\n    active &&\r\n    `\r\n    opacity: 1;\r\n    background: ${styles.background_colour}\r\n    color: ${styles.text_colour};\r\n  `}\r\n  ${({ open }) =>\r\n    open &&\r\n    `\r\n    height: auto;\r\n    opacity: 1;\r\n  `}\r\n`;\r\n\r\nconst SectionSeparator = styled.div`\r\n  width: 100%;\r\n  color: ${styles.text_colour_neg};\r\n  border-bottom: 1px solid ${styles.background_colour};\r\n  font-weight: bold;\r\n  padding: 5px;\r\n`;\r\n\r\nfunction DropDownButtonFactory (props) {\r\n  let dispatch = useDispatch();\r\n\r\n  return (\r\n    <DropDownButtonToggle\r\n      active={props.active === props.type.label}\r\n      open={props.open}\r\n      onClick={(e) => {\r\n        props.setActive(props.type.label)\r\n        dispatch(setWindowRenderComponent(e.target.innerHTML));\r\n      }\r\n      }>\r\n      {props.type.label}\r\n    </DropDownButtonToggle>\r\n  )\r\n}\r\n\r\nfunction PopulateItems(props) {\r\n  const [active, setActive] = useState(0);\r\n    let button = buttons.filter(button => button.label === props.open);\r\n    if ( button.length != 0 ) {\r\n        return button[0].entries.map((e) => (\r\n            <DropDownButtonFactory active={active} \r\n              type={e} \r\n              setActive={setActive} \r\n              open={props.open}\r\n            >\r\n            </DropDownButtonFactory>\r\n        ));\r\n    }\r\n    return <></>;\r\n}\r\n\r\nexport default class SideMenuDropDown extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <ContainerToggle open={this.props.open === this.props.type.label}>\r\n            <SectionSeparator>\r\n              Select a visualisation:\r\n            </SectionSeparator>\r\n            <PopulateItems open={this.props.open} active={this.props.active} setActive={this.props.setActive} />\r\n        </ContainerToggle>\r\n    )\r\n  }\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React from 'react';\r\nimport styled from \"styled-components\";\r\nimport SideMenuDropDown from \"../components/sideMenuDropDown.js\";\r\nimport { IoIosArrowForward } from 'react-icons/io';\r\n\r\nlet styles = require('../styles.js');\r\n\r\nconst Button = styled.button`\r\n    font: 400 18px Roboto;\r\n    z-index: 1000;\r\n    color: ${styles.text_colour};\r\n    background: ${styles.background_colour}\r\n    width: ${styles.side_menu_width};\r\n    height: 50px;\r\n    justify-content: left;\r\n    align-items: center;\r\n    padding: 0;\r\n    box-shadow: none;\r\n    border-right: 1px solid rgba(255, 255, 255, 0.3);\r\n    border-left: none;\r\n    border-top: 1px solid rgba(255, 255, 255, 0.3);\r\n    border-bottom: 1px solid rgba(255, 255, 255, 0.3);\r\n    user-select: none;\r\n    cursor: pointer;\r\n    transition: ease all 250ms;\r\n    &:hover {\r\n        background: rgba(0, 120, 138, 0.7);\r\n    }\r\n    &:disabled {\r\n        cursor: default;\r\n        opacity: 0.9;\r\n    }\r\n    -webkit-writing-mode: none;\r\n    text-rendering: none;\r\n    letter-spacing: none;\r\n    word-spacing: none;\r\n    text-transform: none;\r\n    text-indent: none;\r\n    text-shadow: none;\r\n`;\r\n\r\nButton.defaultProps = {\r\n  theme: \"blue\"\r\n};\r\n\r\n//Set button to change colour on active change\r\nconst MenuButtonToggle = styled(Button)`\r\n  ${({ active }) =>\r\n    active &&\r\n    `\r\n    height: auto;\r\n    opacity: 1;\r\n  `}\r\n`;\r\n\r\n//Button arrow\r\nconst ButtonArrow = styled(IoIosArrowForward)`\r\n    transform: translate(calc(100% - 10px), 0);\r\n`;\r\nconst ButtonArrowToggle = styled(ButtonArrow)`\r\n  ${({active}) =>\r\n    active &&\r\n    `\r\n    transform: rotate(90deg);\r\n  `}\r\n`;\r\n\r\nconst Header = styled.div`\r\n  height: 50px;\r\n  text-align: left;\r\n  float: left;\r\n`;\r\n\r\n//Turn buttons off too\r\nfunction setActive(component) {\r\n  if (component.props.active === component.props.type.label) {\r\n    return component.props.setActive(0);\r\n  }\r\n  component.setState({\r\n    dropdownTitle: component.props.type.label\r\n  });\r\n  return component.props.setActive(component.props.type.label);\r\n}\r\n\r\nexport default class ButtonFactory extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      dropdownTitle: \"\",\r\n    }; \r\n  }\r\n\r\n  render() {\r\n      return (\r\n        <>\r\n        <MenuButtonToggle\r\n          active={this.props.active === this.props.type.label} \r\n          onClick={() => setActive(this)}\r\n        >\r\n          <Header>\r\n          {this.props.type.label}\r\n          <ButtonArrowToggle active={this.props.active === this.props.type.label} />\r\n        </Header>\r\n        </MenuButtonToggle>\r\n          <SideMenuDropDown\r\n            open={this.props.active} \r\n            type={this.props.type} \r\n            active={this.props.active}\r\n            setActive={this.props.setActive}\r\n            title={this.state.dropdownTitle}\r\n          />\r\n        </>\r\n      )\r\n  }\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\n\r\nexport default function TimePickers(props) {\r\n  let [time, setTime] = useState(props.defaultValue);\r\n\r\n    const classes = makeStyles((theme) => ({\r\n        container: {\r\n          display: 'flex',\r\n          flexWrap: 'wrap',\r\n        },\r\n        textField: {\r\n          marginLeft: theme.spacing(1),\r\n          marginRight: theme.spacing(1),\r\n          width: 100,\r\n        },\r\n      }))();\r\n  \r\n    return (\r\n      <form className={classes.container} noValidate>\r\n        <TextField\r\n          id={props.id}\r\n          label={props.label}\r\n          type=\"time\"\r\n          defaultValue={props.defaultValue}\r\n          className={classes.textField}\r\n          InputLabelProps={{\r\n            shrink: true,\r\n          }}\r\n          inputProps={{\r\n            step: 300, // 5 min\r\n          }}\r\n          onChange={(e) => {\r\n            setTime(e.target.value)\r\n            props.onChange(e);\r\n          }}\r\n          value={time}\r\n        />\r\n      </form>\r\n    );\r\n  }","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React, { useState } from 'react';\r\nimport styled from \"styled-components\";\r\nimport { IoIosArrowForward } from 'react-icons/io';\r\n\r\nlet styles = require('../styles.js');\r\n\r\nconst Header = styled.div`\r\n  height: 50px;\r\n  width: 100%;\r\n  text-align: left;\r\n  float: left;\r\n`;\r\n\r\nconst Container = styled.div`\r\n    font: 400 18px Roboto;\r\n    z-index: 1000;\r\n    color: ${styles.text_colour};\r\n    background: ${styles.background_colour}\r\n    width: ${styles.side_menu_width};\r\n    height: 50px;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 0;\r\n    display: flex;\r\n    flex-direction: column;\r\n    box-shadow: none;\r\n    border-right: 1px solid rgba(255, 255, 255, 0.3);\r\n    border-left: none;\r\n    border-top: 1px solid rgba(255, 255, 255, 0.3);\r\n    border-bottom: 1px solid rgba(255, 255, 255, 0.3);\r\n    user-select: none;\r\n    cursor: pointer;\r\n    transition: ease all 250ms;\r\n    &:hover {\r\n        background: rgba(0, 120, 138, 0.7);\r\n    }\r\n    &:disabled {\r\n        cursor: default;\r\n        opacity: 0.9;\r\n    }\r\n    -webkit-writing-mode: none;\r\n    text-rendering: none;\r\n    letter-spacing: none;\r\n    word-spacing: none;\r\n    text-transform: none;\r\n    text-indent: none;\r\n    text-shadow: none;\r\n`;\r\n\r\nContainer.defaultProps = {\r\n  theme: \"blue\"\r\n};\r\n\r\n//Set button to change colour on active change\r\nconst MenuContainerToggle = styled(Container)`\r\n  ${({ active }) =>\r\n    active &&\r\n    `\r\n    height: auto;\r\n    opacity: 1;\r\n  `}\r\n`;\r\n\r\nconst MenuBody = styled.div`\r\n    background: white;\r\n    height: 0px;\r\n    width: 100%;\r\n    display: flex;\r\n    transition: all ease 0.2s;\r\n    display: hidden;\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n    align-items: center;\r\n    opacity: 0;\r\n    color: ${styles.text_colour_neg};\r\n`;\r\n\r\n//Set container to hide on active change\r\nconst MenuBodyToggle = styled(MenuBody)`\r\n  ${({ active }) =>\r\n    active &&\r\n    `\r\n    height: auto;\r\n    opacity: 1;\r\n  `}\r\n`;\r\n\r\n//Container arrow\r\nconst ContainerArrow = styled(IoIosArrowForward)`\r\n    transform: translate(calc(100% - 10px), 0);\r\n`;\r\nconst ContainerArrowToggle = styled(ContainerArrow)`\r\n  ${({active}) =>\r\n    active &&\r\n    `\r\n    transform: rotate(90deg);\r\n  `}\r\n`;\r\n\r\nexport default function SideMenuContainer (props) {\r\n    let [active, setActive] = useState(true);\r\n\r\n    function getChildren() {\r\n        return props.children;\r\n    }\r\n\r\n    return (\r\n        <MenuContainerToggle active={active} >\r\n            <Header onClick={() => setActive(!active)}>\r\n                {props.label}\r\n                <ContainerArrowToggle active={active} />\r\n            </Header>\r\n            <MenuBodyToggle active={active}>\r\n                {getChildren()}\r\n            </MenuBodyToggle>\r\n        </MenuContainerToggle>\r\n    )\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React, { useState } from 'react';\r\nimport styled from \"styled-components\";\r\n\r\nconst styles = require(\"../../styles.js\")\r\n\r\nconst InputCheckbox = styled.input`\r\n    color: ${styles.text_colour_neg}\r\n`;\r\n\r\nconst Label = styled.label`\r\n    color: ${styles.text_colour_neg}\r\n`;\r\n\r\nconst Container = styled.div`\r\n    height: auto;\r\n    width: auto;\r\n    display: flex;\r\n    flex-direction: row;\r\n    padding: 2.5px;\r\n`;\r\n\r\nexport default function Checkbox(props) {\r\n    let [checked, setChecked] = useState(true);\r\n\r\n    return (\r\n        <Container>\r\n            <InputCheckbox type=\"checkbox\" \r\n                id={props.id} \r\n                name={props.name} \r\n                checked={checked} \r\n                onChange={(e) => {\r\n                    setChecked(!checked);\r\n                    props.callback(e, checked);\r\n                }}/>\r\n            <Label for={props.id}>{props.label}</Label>\r\n        </Container>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport ReactRadioButtonGroup from 'react-radio-button-group';\r\nimport styled from \"styled-components\";\r\n\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { setClasses, setReqGranularity, \r\n    setStartTime, setEndTime } from '../redux/filterSlice.js';\r\n\r\nimport TimePicker from './materialUi/TimePicker.js';\r\n\r\nimport SideMenuContainer from \"./sideMenuContainer.js\";\r\nimport Checkbox from \"./html/checkbox.js\";\r\n\r\nconst styles = require(\"../styles.js\")\r\n\r\nconst CheckboxContainer = styled.div`\r\n    display: flex;\r\n    // flex-direction: column;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n    width: 100%;\r\n    height: auto;\r\n    color: ${styles.text_colour_neg}\r\n`;\r\n\r\nconst TimePickerContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    justify-content: space-evenly;\r\n    color: ${styles.text_colour_neg}\r\n`;\r\n\r\nconst SectionLabel = styled.text`\r\n    display: flex;\r\n    color: ${styles.text_colour_neg}\r\n    border-bottom: 1px solid ${styles.background_colour}\r\n    padding: 5px;\r\n    width: 100%;\r\n`;\r\n\r\nexport default function SideMenuFilters(props) {\r\n    const dispatch = useDispatch();\r\n    const filters = useSelector(state => state.filters)\r\n\r\n    const [granularity, setGranularity] = useState(\"day\");\r\n\r\n    return (\r\n        <SideMenuContainer label={\"Visualisation Filters\"}>\r\n            <SectionLabel>\r\n                Engine Classes:\r\n            </SectionLabel>\r\n            <CheckboxContainer id={\"checkbox_engine-classes\"}>\r\n                {filters != undefined ? Object.keys(filters.class).map(property => (\r\n                    <Checkbox\r\n                        id={property}\r\n                        name={property}\r\n                        label={property}\r\n                        callback={(e) => {\r\n                            dispatch(setClasses(e.target.name));\r\n                        }}\r\n                    />\r\n                )) : null}\r\n            </CheckboxContainer>\r\n            \r\n            <SectionLabel>\r\n                Granularity:\r\n            </SectionLabel>\r\n            <CheckboxContainer id={\"checkbox_granularity\"}>\r\n                <ReactRadioButtonGroup\r\n                    options={[\"day\", \"hour\"]}\r\n                    name=\"granularity\"\r\n                    isStateful={false}\r\n                    onChange={\r\n                        (checkedValue) => {\r\n                            setGranularity(checkedValue);\r\n                            dispatch(setReqGranularity(checkedValue))\r\n                        }\r\n                    }\r\n                    value={granularity}\r\n                />\r\n            </CheckboxContainer>\r\n            \r\n            <SectionLabel>\r\n                Trips Between:\r\n            </SectionLabel>\r\n            <TimePickerContainer>\r\n                <TimePicker\r\n                    id={\"start_time\"}\r\n                    label={\"Start Time\"}\r\n                    defaultValue={\"00:00\"}\r\n                    onChange={(e) => {\r\n                        dispatch(setStartTime(e.target.value));\r\n                    }}\r\n                />\r\n                <TimePicker\r\n                    id={\"end_time\"}\r\n                    label={\"End Time\"}\r\n                    defaultValue={\"23:59\"}\r\n                    onChange={(e) => {\r\n                        dispatch(setEndTime(e.target.value));\r\n                    }}\r\n                />\r\n            </TimePickerContainer>\r\n        </SideMenuContainer>\r\n    )\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React, { useState } from 'react';\r\nimport styled from \"styled-components\";\r\nimport ButtonFactory from \"./sideMenuButton.js\";\r\nimport SideMenuFilter from \"./sideMenuFilters.js\"\r\n\r\nimport { FaDatabase, FaEye, FaTools, FaCog } from 'react-icons/fa';\r\n\r\nlet styles = require('../styles.js');\r\n\r\nconst MenuContainer = styled.div`\r\n    transition: opacity 0.2s, width 0.2s;\r\n    z-index: 20000;\r\n    display: flex;\r\n    flex-direction: column;\r\n    top: 0px; left: 0;\r\n    width: ${styles.side_menu_width};\r\n    opacity: 1;\r\n    background-color: ${styles.side_menu_background};\r\n`;\r\n\r\nconst MenuContainerToggle = styled(MenuContainer)`\r\n    ${({closed}) =>\r\n        closed &&\r\n        `\r\n        opacity: 0 !important;\r\n        width: 0%;\r\n        transition: width 0.5 linear;\r\n        `\r\n    }\r\n`;\r\n\r\nexport const buttons = [\r\n    {\r\n        \"label\": \"Visualisation\",\r\n        \"entries\": [\r\n            {\r\n                \"label\": \"Stream Graph\",\r\n                \"onClick\": function() {\r\n\r\n                }\r\n            }, \r\n            // {\r\n            //     \"label\": \"Heat Chart\",\r\n            //     \"onClick\": function() {}\r\n            // }, \r\n            // {\r\n            //     \"label\": \"Bubble Chart\"\r\n            // }\r\n        ]\r\n    },\r\n    // {\r\n    //     \"label\": \"Data\",\r\n    //     //Represents buttons within this menu\r\n    //     \"entries\": [{\"label\": \"Wellington\"}, {\"label\": \"Auckland\"}, {\"label\": \"Custom\"}]\r\n    // },\r\n    // {\r\n    //     \"label\": \"Visualisation Tools\",\r\n    //     \"entries\": []\r\n    // },\r\n    // {\r\n    //     \"label\": \"Visualisation Options\",\r\n    //     \"entries\": []\r\n    // },\r\n]\r\nconst DB = styled(FaDatabase)`\r\ntransform: translate(calc(100% - 10px), 0);\r\n`;\r\nconst Eye = styled(FaEye)`\r\ntransform: translate(calc(100% - 10px), 0);\r\n`;\r\nconst Tool = styled(FaTools)`\r\ntransform: translate(calc(100% - 10px), 0);\r\n`;\r\nconst Cog = styled(FaCog)`\r\ntransform: translate(calc(100% - 10px), 0);\r\n`;\r\n\r\nexport default function SideMenuLeft() {\r\n    const [active, setActive] = useState(\"Visualisation\");\r\n\r\n    return (\r\n        <>\r\n            <MenuContainer>                \r\n                {buttons.map((type) => (\r\n                    <ButtonFactory active={active}\r\n                        type={type} \r\n                        setActive={setActive}\r\n                    >\r\n                    </ButtonFactory>\r\n                ))}\r\n                <SideMenuFilter />\r\n            </MenuContainer>\r\n        </>\r\n    )\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport styled from \"styled-components\";\r\n\r\nimport { connect, useSelector } from 'react-redux';\r\n\r\nlet styles = require('../styles.js')\r\n\r\nconst Container = styled.div`\r\n    // flex: 1 1 auto;\r\n    border: 2px rgba(0,0,0,0.4) solid;\r\n    box-shadow: 0px 0px 2px 3px ${styles.window_background_colour};\r\n    width: 100%;\r\n    height: calc(100% - 300px);\r\n    display: flex;\r\n    flex-direction: column;\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\tz-index: 99;\r\n\tbackground: #fefefe;\r\n`;\r\n\r\nconst Header = styled.div`\r\n    display: flex;\r\n    background-color: ${styles.window_background_colour};\r\n    width: 100%;\r\n    height: ${styles.window_header_height};\r\n    cursor: all-scroll;\r\n    color: ${styles.text_colour_neg};\r\n    align-items: center;\r\n`;\r\n\r\nconst HeaderText = styled.text`\r\n    font: 400 18px Roboto;\r\n    color: ${styles.text_colour_neg};\r\n    margin: 10px;\r\n`;\r\n\r\nconst GhostPane = styled.div`\r\n    background: #999;\r\n\topacity: 0.2;\r\n\r\n\twidth: 45%;\r\n\theight: 45%;\r\n\ttop: 20%;\r\n\tleft: 20%;\r\n\t\r\n\tposition: absolute;\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\tz-index: 98;\r\n\r\n\t-webkit-transition: all 0.25s ease-in-out;\r\n\t-moz-transition: all 0.25s ease-in-out;\r\n\t-ms-transition: all 0.25s ease-in-out;\r\n\t-o-transition: all 0.25s ease-in-out;\r\n    transition: all 0.25s ease-in-out;\r\n`;\r\n\r\n//Window Resizing html components\r\nlet pane, ghostpane;\r\n\r\n// // Minimum resizable area\r\n// var minWidth = 60;\r\n// var minHeight = 40;\r\n\r\n// // Thresholds\r\n// var FULLSCREEN_MARGINS = -10;\r\n// var MARGINS = 4;\r\n\r\n// // End of what's configurable.\r\n// var clicked = null;\r\n// var onRightEdge, onBottomEdge, onLeftEdge, onTopEdge;\r\n\r\n// var rightScreenEdge, bottomScreenEdge;\r\n\r\n// var preSnapped;\r\n\r\n// var b, x, y;\r\n\r\n// var redraw = false;\r\n\r\n// function setBounds(element, x, y, w, h) {\r\n// \telement.style.left = x + 'px';\r\n// \telement.style.top = y + 'px';\r\n// \telement.style.width = w + 'px';\r\n// \telement.style.height = h + 'px';\r\n// }\r\n\r\n// function hintHide() {\r\n//   setBounds(ghostpane, b.left, b.top, b.width, b.height);\r\n//   ghostpane.style.opacity = 0;\r\n\r\n//   // var b = ghostpane.getBoundingClientRect();\r\n//   // ghostpane.style.top = b.top + b.height / 2;\r\n//   // ghostpane.style.left = b.left + b.width / 2;\r\n//   // ghostpane.style.width = 0;\r\n//   // ghostpane.style.height = 0;\r\n// }\r\n\r\n// function onTouchDown(e) {\r\n//   onDown(e.touches[0]);\r\n//   e.preventDefault();\r\n// }\r\n\r\n// function onTouchMove(e) {\r\n//   onMove(e.touches[0]);\t\t\r\n// }\r\n\r\n// function onTouchEnd(e) {\r\n//   if (e.touches.length ==0) onUp(e.changedTouches[0]);\r\n// }\r\n\r\n// function onMouseDown(e) {\r\n//   onDown(e);\r\n//   e.preventDefault();\r\n// }\r\n\r\n// function onDown(e) {\r\n//   calc(e);\r\n\r\n//   var isResizing = onRightEdge || onBottomEdge || onTopEdge || onLeftEdge;\r\n\r\n//   clicked = {\r\n//     x: x,\r\n//     y: y,\r\n//     cx: e.clientX,\r\n//     cy: e.clientY,\r\n//     w: b.width,\r\n//     h: b.height,\r\n//     isResizing: isResizing,\r\n//     isMoving: !isResizing && canMove(),\r\n//     onTopEdge: onTopEdge,\r\n//     onLeftEdge: onLeftEdge,\r\n//     onRightEdge: onRightEdge,\r\n//     onBottomEdge: onBottomEdge\r\n//   };\r\n// }\r\n\r\n// function canMove() {\r\n//   return x > 0 && x < b.width && y > 0 && y < b.height\r\n//   && y < 30;\r\n// }\r\n\r\n// function calc(e) {\r\n//   b = pane.getBoundingClientRect();\r\n//   x = e.clientX - b.left;\r\n//   y = e.clientY - b.top;\r\n\r\n//   onTopEdge = y < MARGINS;\r\n//   onLeftEdge = x < MARGINS;\r\n//   onRightEdge = x >= b.width - MARGINS;\r\n//   onBottomEdge = y >= b.height - MARGINS;\r\n\r\n//   rightScreenEdge = window.innerWidth - MARGINS;\r\n//   bottomScreenEdge = window.innerHeight - MARGINS;\r\n// }\r\n\r\n// var e;\r\n\r\n// function onMove(ee) {\r\n//   calc(ee);\r\n\r\n//   e = ee;\r\n\r\n//   redraw = true;\r\n\r\n// }\r\n\r\n// function animate() {\r\n\r\n//   requestAnimationFrame(animate);\r\n\r\n//   if (!redraw) return;\r\n\r\n//   redraw = false;\r\n\r\n//   if (clicked && clicked.isResizing) {\r\n\r\n//     if (clicked.onRightEdge) pane.style.width = Math.max(x, minWidth) + 'px';\r\n//     if (clicked.onBottomEdge) pane.style.height = Math.max(y, minHeight) + 'px';\r\n\r\n//     if (clicked.onLeftEdge) {\r\n//       var currentWidth = Math.max(clicked.cx - e.clientX  + clicked.w, minWidth);\r\n//       if (currentWidth > minWidth) {\r\n//         pane.style.width = currentWidth + 'px';\r\n//         pane.style.left = e.clientX + 'px';\t\r\n//       }\r\n//     }\r\n\r\n//     if (clicked.onTopEdge) {\r\n//       var currentHeight = Math.max(clicked.cy - e.clientY  + clicked.h, minHeight);\r\n//       if (currentHeight > minHeight) {\r\n//         pane.style.height = currentHeight + 'px';\r\n//         pane.style.top = e.clientY + 'px';\t\r\n//       }\r\n//     }\r\n\r\n//     hintHide();\r\n\r\n//     return;\r\n//   }\r\n\r\n//   if (clicked && clicked.isMoving) {\r\n\r\n//     if (b.top < FULLSCREEN_MARGINS || b.left < FULLSCREEN_MARGINS || b.right > window.innerWidth - FULLSCREEN_MARGINS || b.bottom > window.innerHeight - FULLSCREEN_MARGINS) {\r\n//       // hintFull();\r\n//       setBounds(ghostpane, 0, 0, window.innerWidth, window.innerHeight);\r\n//       ghostpane.style.opacity = 0.2;\r\n//     } else if (b.top < MARGINS) {\r\n//       // hintTop();\r\n//       setBounds(ghostpane, 0, 0, window.innerWidth, window.innerHeight / 2);\r\n//       ghostpane.style.opacity = 0.2;\r\n//     } else if (b.left < MARGINS) {\r\n//       // hintLeft();\r\n//       setBounds(ghostpane, 0, 0, window.innerWidth / 2, window.innerHeight);\r\n//       ghostpane.style.opacity = 0.2;\r\n//     } else if (b.right > rightScreenEdge) {\r\n//       // hintRight();\r\n//       setBounds(ghostpane, window.innerWidth / 2, 0, window.innerWidth / 2, window.innerHeight);\r\n//       ghostpane.style.opacity = 0.2;\r\n//     } else if (b.bottom > bottomScreenEdge) {\r\n//       // hintBottom();\r\n//       setBounds(ghostpane, 0, window.innerHeight / 2, window.innerWidth, window.innerWidth / 2);\r\n//       ghostpane.style.opacity = 0.2;\r\n//     } else {\r\n//       hintHide();\r\n//     }\r\n\r\n//     if (preSnapped) {\r\n//       setBounds(pane,\r\n//       \te.clientX - preSnapped.width / 2,\r\n//       \te.clientY - Math.min(clicked.y, preSnapped.height),\r\n//       \tpreSnapped.width,\r\n//       \tpreSnapped.height\r\n//       );\r\n//       return;\r\n//     }\r\n\r\n//     // moving\r\n//     pane.style.top = (e.clientY - clicked.y) + 'px';\r\n//     pane.style.left = (e.clientX - clicked.x) + 'px';\r\n\r\n//     return;\r\n//   }\r\n\r\n//   // This code executes when mouse moves without clicking\r\n\r\n//   // style cursor\r\n//   if (onRightEdge && onBottomEdge || onLeftEdge && onTopEdge) {\r\n//     pane.style.cursor = 'nwse-resize';\r\n//   } else if (onRightEdge && onTopEdge || onBottomEdge && onLeftEdge) {\r\n//     pane.style.cursor = 'nesw-resize';\r\n//   } else if (onRightEdge || onLeftEdge) {\r\n//     pane.style.cursor = 'ew-resize';\r\n//   } else if (onBottomEdge || onTopEdge) {\r\n//     pane.style.cursor = 'ns-resize';\r\n//   } else if (canMove()) {\r\n//     pane.style.cursor = 'move';\r\n//   } else {\r\n//     pane.style.cursor = 'default';\r\n//   }\r\n// }\r\n\r\n// function onUp(e) {\r\n//   calc(e);\r\n\r\n//   if (clicked && clicked.isMoving) {\r\n//     // Snap\r\n//     var snapped = {\r\n//       width: b.width,\r\n//       height: b.height\r\n//     };\r\n\r\n//     if (b.top < FULLSCREEN_MARGINS || b.left < FULLSCREEN_MARGINS || b.right > window.innerWidth - FULLSCREEN_MARGINS || b.bottom > window.innerHeight - FULLSCREEN_MARGINS) {\r\n//       // hintFull();\r\n//       setBounds(pane, 0, 0, window.innerWidth, window.innerHeight);\r\n//       preSnapped = snapped;\r\n//     } else if (b.top < MARGINS) {\r\n//       // hintTop();\r\n//       setBounds(pane, 0, 0, window.innerWidth, window.innerHeight / 2);\r\n//       preSnapped = snapped;\r\n//     } else if (b.left < MARGINS) {\r\n//       // hintLeft();\r\n//       setBounds(pane, 0, 0, window.innerWidth / 2, window.innerHeight);\r\n//       preSnapped = snapped;\r\n//     } else if (b.right > rightScreenEdge) {\r\n//       // hintRight();\r\n//       setBounds(pane, window.innerWidth / 2, 0, window.innerWidth / 2, window.innerHeight);\r\n//       preSnapped = snapped;\r\n//     } else if (b.bottom > bottomScreenEdge) {\r\n//       // hintBottom();\r\n//       setBounds(pane, 0, window.innerHeight / 2, window.innerWidth, window.innerWidth / 2);\r\n//       preSnapped = snapped;\r\n//     } else {\r\n//       preSnapped = null;\r\n//     }\r\n\r\n//     hintHide();\r\n\r\n//   }\r\n\r\n//   clicked = null;\r\n\r\n// }\r\n\r\n\r\nfunction getStyles(height) {\r\n    if (height != undefined) return {height: height}\r\n    return {};\r\n}\r\n\r\nfunction WindowComponent(props) {\r\n    //WTF is going on here fren\r\n    // ─────────▄──────────────▄\r\n    // ────────▌▒█───────────▄▀▒▌\r\n    // ────────▌▒▒▀▄───────▄▀▒▒▒▐\r\n    // ───────▐▄▀▒▒▀▀▀▀▄▄▄▀▒▒▒▒▒▐\r\n    // ─────▄▄▀▒▒▒▒▒▒▒▒▒▒▒█▒▒▄█▒▐\r\n    // ───▄▀▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▀██▀▒▌\r\n    // ──▐▒▒▒▄▄▄▒▒▒▒▒▒▒▒▒▒▒▒▒▀▄▒▒▌\r\n    // ──▌▒▒▐▄█▀▒▒▒▒▄▀█▄▒▒▒▒▒▒▒█▒▐\r\n    // ─▐▒▒▒▒▒▒▒▒▒▒▒▌██▀▒▒▒▒▒▒▒▒▀▄▌\r\n    // ─▌▒▀▄██▄▒▒▒▒▒▒▒▒▒▒▒░░░░▒▒▒▒▌\r\n    // ─▌▀▐▄█▄█▌▄▒▀▒▒▒▒▒▒░░░░░░▒▒▒▐\r\n    // ▐▒▀▐▀▐▀▒▒▄▄▒▄▒▒▒▒▒░░░░░░▒▒▒▒▌\r\n    // ▐▒▒▒▀▀▄▄▒▒▒▄▒▒▒▒▒▒░░░░░░▒▒▒▐\r\n    // ─▌▒▒▒▒▒▒▀▀▀▒▒▒▒▒▒▒▒░░░░▒▒▒▒▌\r\n    // ─▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▐\r\n    // ──▀▄▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▄▒▒▒▒▌\r\n    // ────▀▄▒▒▒▒▒▒▒▒▒▒▄▄▄▀▒▒▒▒▄▀\r\n    // ───▐▀▒▀▄▄▄▄▄▄▀▀▀▒▒▒▒▒▄▄▀\r\n    // ──▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▀▀\r\n    useEffect(() => {\r\n        \r\n    })\r\n        \r\n    return (\r\n            <>\r\n                <Container id={props.id} style={getStyles(props.height)}>\r\n                    <Header>\r\n                        <HeaderText>\r\n                            {props.headerText}\r\n                        </HeaderText>\r\n                    </Header>\r\n                </Container>\r\n                {/* <GhostPane id=\"ghostpane\" /> */}\r\n            </>\r\n        )        \r\n}\r\n\r\nconst mapStateToProps = (state) => \r\n    {\r\n        console.log(state);\r\n        return {\r\n            selectedComponent : state.windows.windowRenderComponent,\r\n            class: state.filters.class,\r\n        }\r\n    }\r\nexport default connect(mapStateToProps)(WindowComponent);","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport * as d3 from \"d3\";\r\nconst styles = require(\"../styles.js\")\r\n\r\nexport let axisFactoryMixin = {\r\n    createXAxis(xRange, label) {\r\n        let x = d3.scaleLinear().domain(xRange).range([0, this.graphBounds.xaxis]);\r\n    \r\n        this.focus.append(\"g\")\r\n            .attr(\"class\", \"x\")\r\n            .transition()\r\n            .duration(100)\r\n            .call(d3.axisBottom(x))\r\n            .selectAll('text')\r\n            .attr(\"transform\", \"rotate(90)\")\r\n            .attr(\"transform\", \"\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"font-size\", \"14px\")\r\n            .attr(\"font-weight\", \"bold\")\r\n            .attr(\"x\", -10)\r\n            .attr(\"y\", -2.5);\r\n    \r\n        this.focus.select(\".x\")\r\n            .append(\"text\")\r\n            .attr(\"transform\", \"translate(\" + this.graphBounds.xaxis + \" ,\" + ((this.height - this.margin.top - this.margin.bottom) + this.margin.top) + \")\")\r\n            .attr(\"class\", \"x-label\")\r\n            .attr(\"font-size\", \"16px\")\r\n            .attr(\"font-weight\", \"bold\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .style(\"fill\", \"black\")\r\n            .text(label);\r\n    \r\n        return x;\r\n    },\r\n}\r\n\r\nexport let axisCategoricalMixin = {}\r\n\r\nexport let axisDateMixin = {\r\n    createXAxis(xRange, label) {\r\n        this.xScale = d3.scaleTime()\r\n            .domain([new Date(2019, 0, 1), new Date(2019,11,10)])\r\n            .range([0, this.graphBounds.xaxis]);\r\n    \r\n        this.gX = this.focus.append(\"g\")\r\n            .attr(\"class\", \"x\")\r\n            .transition()\r\n            .duration(100)\r\n            .call(d3.axisBottom(this.xScale))\r\n        this.gX\r\n            .selectAll('text')\r\n            .attr(\"transform\", \"rotate(45deg)\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"font-size\", \"16px\")\r\n            .attr(\"font-weight\", \"bold\")\r\n            .attr(\"y\", 10);\r\n    \r\n        this.focus.select(\".x\")\r\n            .append(\"text\")\r\n            .attr(\"class\", \"x-label\")\r\n            .attr(\"font-size\", \"16px\")\r\n            .attr(\"font-weight\", \"bold\")\r\n            .style(\"text-anchor\", \"start\")\r\n            .style(\"fill\", \"black\")\r\n            .text(label);\r\n    \r\n        return d3.axisBottom(this.xScale);\r\n    },\r\n\r\n    drawXAxis (axis, xRange, label) {\r\n        this.xScale\r\n            .domain([new Date(2019, 0, 1), new Date(2019,11,10)])\r\n            .range([0, this.graphBounds.xaxis]);\r\n\r\n        //ticks\r\n        this.gX = this.focus.select(\".x\")\r\n            .attr(\"class\", \"x\")\r\n            .attr(\"transform\", \"translate(0,\" + this.graphBounds.yaxis + \")\")\r\n            .call(this.xScale)\r\n        this.gX\r\n            .selectAll('.tick')\r\n            .attr(\"class\", \"x-ticks\")\r\n            .attr(\"y\", 25);\r\n\r\n            //Label\r\n        this.focus.select(\".x\")\r\n            .selectAll(\"text\")\r\n            // .style(\"transform\", \"rotate(45deg)\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"font-size\", \"16px\")\r\n            .attr(\"font-weight\", \"bold\")\r\n            .attr(\"y\", 10);\r\n\r\n        this.focus.select(\".x\")\r\n            .append(\"text\")\r\n            .attr(\"class\", \"x-label\")\r\n            .text(label);\r\n    }\r\n}\r\n\r\nexport let axisContinuousMixin = {\r\n    createYAxis (yRange, label) {\r\n        this.yScale = d3.scaleLinear()\r\n            .range([this.graphBounds.yaxis, this.margin.top + this.margin.bottom]);\r\n\r\n        this.gY = this.focus.append(\"g\")\r\n            .attr(\"class\", \"y\")\r\n            .transition()\r\n            .duration(100)\r\n            .call(d3.axisLeft(this.yScale))\r\n        this.gY\r\n            .selectAll(\"text\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"transform\", \"translate(-35, 0)\")\r\n            .attr(\"font-size\", \"14px\")\r\n            .attr(\"font-weight\", \"bold\");\r\n    \r\n        // Y label\r\n        this.focus.select(\".y\")\r\n            .append(\"text\")\r\n            .attr(\"transform\", \"translate(-\" + 15 + \", -\" + 5 + \")\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(label);\r\n    \r\n        return d3.axisLeft(this.yScale);\r\n    },\r\n\r\n    drawYAxis(text, yMax) {\r\n        this.yScale.domain([0, yMax]);\r\n    \r\n        this.gY = this.focus.select(\".y\")\r\n            .attr(\"class\", \"y\")\r\n            .call(this.yAxis);\r\n        this.gY\r\n            .selectAll(\"text\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"transform\", \"translate(-35, 0)\")\r\n            .attr(\"font-size\", \"14px\")\r\n            .attr(\"font-weight\", \"bold\")\r\n    \r\n        this.focus\r\n            .select(\".y\")\r\n            .append(\"text\")\r\n            .attr(\"class\", \"y-label\")\r\n            .text(text);\r\n    }\r\n}\r\n\r\nexport class D3Graph {\r\n    constructor(containerId, title, xAxis, yAxis) {\r\n        this.containerId = containerId;\r\n        this.title = title;\r\n        this.xAxis = xAxis;\r\n        this.yAxis = yAxis;\r\n        this.margin = {\r\n            top: 10,\r\n            bottom: 45,\r\n            left: 75,\r\n            right: 75\r\n        }\r\n        this.graphBounds = {\r\n            xaxis: 0,\r\n            yaxis: 0\r\n        };\r\n        this.zoomable = false;\r\n    }\r\n\r\n    getContainer() {\r\n        return this.container;\r\n    }\r\n\r\n    setContainer(container) {\r\n        this.container = container;\r\n    }\r\n\r\n    setZoomable(zoomable) {\r\n        this.zoomable = zoomable;\r\n    }\r\n\r\n    getTitle() {\r\n        return this.title;\r\n    }\r\n\r\n    setTitle(title) {\r\n        this.title = title;\r\n    }\r\n\r\n    getXAxis() {\r\n        return this.xAxis;\r\n    }\r\n\r\n    setXAxis(xAxis) {\r\n        this.xAxis = xAxis;\r\n    }\r\n\r\n    getYAxis() {\r\n        return this.yAxis;\r\n    }\r\n\r\n    setYAxis(yAxis) {\r\n        this.yAxis = yAxis;\r\n    }\r\n\r\n    setG() {\r\n        this.g = d3.select(\"#\".concat(this.containerId))\r\n            .select(\".focus\")\r\n            .append(\"g\")\r\n            .attr(\"id\", \"plot\")\r\n    }\r\n\r\n    init() {\r\n        //Attach to container\r\n        let containerId = \"#\".concat(this.containerId);\r\n\r\n        // Delete old svg\r\n        // Create a new one\r\n        if (!d3.select(containerId).select(\"#svg_parent_container\").empty()) {\r\n            d3.select(containerId)\r\n                .select(\"#svg_parent_container\")\r\n                .remove();\r\n        }\r\n        this.svg = d3.select(containerId)\r\n            .append(\"svg\")\r\n            .attr(\"id\", \"svg_parent_container\");\r\n        // Default behaviour fill entire container\r\n        this.width = d3.select(containerId).node().offsetWidth;\r\n        this.height = d3.select(containerId).node().offsetHeight - this.margin.top - this.margin.bottom;\r\n        //Axis bounds\r\n        this.graphBounds.xaxis = this.width - this.margin.left - this.margin.right;\r\n        this.graphBounds.yaxis = this.height - styles.convertToInt(styles.window_header_height);\r\n        //Resize svg\r\n        this.svg\r\n            .attr(\"width\", this.width)\r\n            .attr(\"height\", this.height)\r\n        //Add focus, this is our top level group for the visualisation\r\n        this.focus = this.svg\r\n            .append(\"g\")\r\n            .attr(\"class\", \"focus\")\r\n            .attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\r\n        //Set the group of the plot, used to zoom the plot separately\r\n        //to the focus\r\n        this.setG();\r\n    }\r\n\r\n    /**\r\n     * Takes an object, property value pairs\r\n     * that describe the styles to be applied to a single component\r\n     * described by selector array\r\n     * \r\n     * @param {Array} selector \r\n     * @param {Object} styleArray \r\n     */\r\n    applyStyle (selectors, styleObj) {\r\n        let element = this.focus;\r\n        selectors.forEach((selector) => {\r\n            element = element.select(selector);\r\n        })\r\n        for (let style of Object.keys(styleObj)) {\r\n            element.style(style, styleObj[style]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Takes an object, property value pairs\r\n     * that describe the styles to be applied to all components\r\n     * described by selector array\r\n     * \r\n     * @param {Array} selector \r\n     * @param {Object} styleObj\r\n     */\r\n    applyStyleAll (selectors, styleObj) {\r\n        let element = this.focus;\r\n        selectors.forEach((selector) => {\r\n            element = element.selectAll(selector);\r\n        })\r\n        console.log(element);\r\n        for (let style of Object.keys(styleObj)) {\r\n            console.log(style, styleObj[style]);\r\n            element.style(style, styleObj[style]);\r\n        }\r\n    }\r\n\r\n    // TO BE IMPLEMENTED\r\n    draw () {\r\n        this.init();\r\n        if (this.getXAxis != undefined) this.drawXAxis(this.getXAxis())\r\n        if (this.getYAxis != undefined) this.drawYAxis(this.getYAxis());\r\n        if (this.render() != -1) this.render();\r\n    }\r\n\r\n    /**\r\n     * This is a method that can be overridden by mixins,\r\n     * similar to how Java uses inheritance of interfaces to implement\r\n     * methods, or inhertinace from classes that provide default behaviour\r\n     * to be implemented or overridden\r\n     */\r\n    render () {\r\n        return -1;\r\n    }\r\n\r\n    setData (data) {\r\n        this.data = data;\r\n    }\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport * as d3 from \"d3\";\r\nconst styles = require(\"../styles.js\")\r\n\r\nexport let streamGraphMixin = {\r\n    area: d3.area(),\r\n    setColorScheme(colorScheme) { this.colorScheme = colorScheme; },\r\n    setKeys(keys)               { this.keys = keys; },\r\n    setStreamData(data)         { this.streamData = data; },\r\n\r\n    /**\r\n     * Takes processed stack data in the form return by d3.stack()\r\n     * and returns the maximum sum of all points in all of the columns.\r\n     * \r\n     * \r\n     * @param {*} stack \r\n     * @param {*} stackKeys \r\n     */\r\n    calcStackHeight(stack, stackKeys) {\r\n        return stack.map(d => {\r\n            let sum = 0;\r\n            Object.keys(d).forEach(key => {\r\n                if (stackKeys.includes(key)) {\r\n                    sum = sum + d[key];\r\n                }\r\n            })\r\n            return sum;\r\n        })\r\n    },\r\n\r\n    /**\r\n     * Bind a graph with a zoom function and connect its zooming to a brush on a separate\r\n     * graph. For an example, \r\n     * see: https://bl.ocks.org/mbostock/34f08d5e11952a80609169b7917d4172\r\n     * \r\n     * @param {D3Graph} brushedGraph \r\n     * @param {D3Graph} zoomedGraph \r\n     */\r\n    addBrushAndZoom(brushedGraph, zoomedGraph) {\r\n        //Brush\r\n        let brush = d3.brushX()\r\n            .extent([[0, 0], [brushedGraph.graphBounds.xaxis, brushedGraph.graphBounds.yaxis]])\r\n            .on(\"brush\", brushed)\r\n        //Zoom\r\n        let zoom = d3.zoom()\r\n            .scaleExtent([1, Infinity])\r\n            .translateExtent([[0, 0], [zoomedGraph.graphBounds.xaxis, zoomedGraph.graphBounds.yaxis]])\r\n            .extent([[0, 0], [zoomedGraph.graphBounds.xaxis, zoomedGraph.graphBounds.yaxis]])\r\n            .on(\"zoom\", zoomed)\r\n\r\n        brushedGraph.focus\r\n            .append(\"g\")\r\n            .attr(\"class\", \"brush\")\r\n            .call(brush)\r\n            .call(brush.move, zoomedGraph.xScale.range())\r\n\r\n        zoomedGraph.focus\r\n            .select(\"#plot\")\r\n            .remove();\r\n\r\n        zoomedGraph.focus     \r\n            // .append(\"defs\")\r\n            .append(\"clipPath\")\r\n            .attr(\"id\", \"zoom\")\r\n            .append(\"rect\")\r\n            .attr(\"x\", \"0\")\r\n            .attr(\"y\", \"0\")\r\n            .attr(\"width\", zoomedGraph.graphBounds.xaxis)\r\n            .attr(\"height\", zoomedGraph.graphBounds.yaxis)\r\n\r\n        //Set new\r\n        zoomedGraph.g = zoomedGraph.focus\r\n            .append(\"g\")\r\n            .attr(\"id\", \"plot\")\r\n            .attr(\"clip-path\", \"url(#zoom)\")\r\n\r\n        //Attach zoom\r\n        zoomedGraph.focus\r\n            .select(\"#plot\")\r\n            .call(zoom)\r\n\r\n        this.enter();\r\n        this.render();\r\n\r\n        function zoomed(event, d) {\r\n            if (event.sourceEvent == undefined) return; // ignore zoom-by-brush\r\n            var t = event.transform;\r\n            // Clear previous ticks\r\n            zoomedGraph.focus\r\n                .selectAll(\".x-ticks\")\r\n                .remove()\r\n                .exit();\r\n            //Rescale x\r\n            zoomedGraph.gX\r\n                .call(zoomedGraph.xAxis.scale(t.rescaleX(zoomedGraph.xScale)));\r\n            // Call brush to move to match zoom\r\n            brushedGraph.focus.select(\".brush\")\r\n                .call(brush.move, zoomedGraph.xScale.range().map(t.invertX, t)); \r\n            // Transform main graph\r\n            zoomedGraph.focus.select(\"#plot\")\r\n                .attr(\"transform\", \"translate(\" + t.x + \") scale(\" + t.k + \",1)\");\r\n            // Restyle\r\n            zoomedGraph.gX\r\n                .selectAll(\".tick\")\r\n                .selectAll(\"text\")\r\n                .attr(\"text-anchor\", \"start\")\r\n                .attr(\"transform\", \"translate(-35, 0)\")\r\n                .attr(\"font-size\", \"14px\")\r\n                .attr(\"font-weight\", \"bold\");\r\n        }\r\n\r\n        function brushed(event, d) {\r\n            if (event.sourceEvent == undefined) return; // ignore brush-by-zoom\r\n            var s = event.selection || brushedGraph.xScale.range();\r\n            let t = d3.zoomIdentity\r\n                .scale(zoomedGraph.graphBounds.xaxis / (s[1] - s[0]))\r\n                .translate(-s[0], 0);\r\n            // Clear previous ticks\r\n            zoomedGraph.focus\r\n                .selectAll(\".x-ticks\")\r\n                .remove()\r\n                .exit();\r\n\r\n            zoomedGraph.xScale.domain(s.map(brushedGraph.xScale.invert, brushedGraph.xScale));\r\n            zoomedGraph.gX\r\n                .call(zoomedGraph.xAxis.scale(t.rescaleX(zoomedGraph.xScale)));\r\n            \r\n            zoomedGraph.focus\r\n                .select(\"#plot\")\r\n                .attr(\"transform\", \"translate(\" + t.x + \") scale(\" + t.k + \",1)\");\r\n\r\n            //Redraw styles\r\n            zoomedGraph.gX\r\n                .selectAll(\".tick\")\r\n                .selectAll(\"text\")\r\n                .attr(\"text-anchor\", \"start\")\r\n                .attr(\"transform\", \"translate(-35, 0)\")\r\n                .attr(\"font-size\", \"14px\")\r\n                .attr(\"font-weight\", \"bold\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Called to initialise the graph, only called once per draw\r\n     */\r\n    enter() {\r\n        let t = this;\r\n\r\n        this.stackedData = d3.stack()\r\n            .offset(d3.stackOffsetNone)\r\n            .keys(this.keys)\r\n            (this.streamData)\r\n        \r\n        let yMax = d3.max(this.calcStackHeight(this.streamData, this.keys));\r\n        this.drawYAxis(0, yMax);\r\n\r\n        this.blankArea = d3.area()\r\n            .x(d => {\r\n                return t.xScale(new Date(d.data.date));\r\n            })\r\n            .y0(d => { return t.height - t.margin.bottom; })\r\n            .y1(d => { return t.height - t.margin.bottom; })\r\n            .curve(d3.curveMonotoneX);\r\n\r\n            \r\n        // Select all paths (enter)\r\n        this.path = this.g\r\n            .selectAll(\".mylayers\")\r\n            .data(this.stackedData);\r\n        // Update selection\r\n        // Set area to zero so it has a growing effect\r\n        // when drawing\r\n        this.path\r\n            .enter()\r\n            .append(\"path\")\r\n            .attr(\"class\", \"mylayers\")\r\n            .on(\"mouseover\", function (d, i) {\r\n\r\n            })\r\n            .on(\"mousemove\", function (d, i) {\r\n                d3.select(this)\r\n                    .attr(\"stroke\", \"black\");\r\n            })\r\n            .on(\"mouseout\", function () {\r\n                t.g.selectAll(\".mylayers\")\r\n                    .transition()\r\n                    // .attr(\"transition-duration\", \"300ms\")\r\n                    .attr(\"opacity\", 1);\r\n                d3.select(this)\r\n                    .attr(\"stroke\", \"none\");\r\n            })\r\n            .attr(\"opacity\", 1)\r\n            .style(\"fill\", function (d) { return t.colorScheme[d.key] })\r\n            .attr(\"d\", this.blankArea)\r\n            .attr(\"clip-path\", \"url(#zoom)\")\r\n    },\r\n\r\n    /**\r\n     * Update, called after enter to update the visualisation with new data\r\n     * e.g             \r\n     * let fetchURL = encodeURI(`http://127.0.0.1:5000/${granularity}/wellington/${d1}/${d2}`);\r\n     * let res = await fetch(fetchURL);\r\n     * const json = await res.json();\r\n     * dispatch(setStreamData(json));\r\n     * Graph.render();\r\n     */\r\n    render() {\r\n        let t = this;\r\n\r\n        //Set the y domain\r\n        let yMax = d3.max(this.calcStackHeight(this.streamData, this.keys));\r\n        this.yScale.domain([0, yMax]);\r\n        this.focus.select(\".y\").call(d3.axisLeft(this.yScale))\r\n\r\n        //Reset stackedData\r\n        //this.streamData is updated externally,\r\n        //and we are using pure JS in this file,\r\n        //so we must recalculate instead of relying \r\n        //on a cached version\r\n        this.stackedData = d3.stack()\r\n            .offset(d3.stackOffsetNone)\r\n            .keys(this.keys)\r\n            (this.streamData)\r\n\r\n        this.area = d3.area()\r\n            .x(function (d, i) {\r\n                return t.xScale(new Date(d.data.date));\r\n            })\r\n            .y0(function (d) {\r\n                return t.yScale(d[0]);\r\n            })\r\n            .y1(function (d) {\r\n                return t.yScale(d[1]);\r\n            }).curve(d3.curveMonotoneX)\r\n\r\n        //Enter data\r\n        this.path = this.g\r\n            .selectAll(\".mylayers\")\r\n            .data(this.stackedData);\r\n\r\n        //Using same selection, update path\r\n        this.path\r\n            .join(\r\n                enter => enter,\r\n                    // .append(\"path\")\r\n                    // .attr(\"class\", \"mylayers\")\r\n                    // .attr(\"d\", this.blankArea),\r\n                update => update,\r\n                exit => exit\r\n                    .attr(\"d\", this.area)\r\n                    .remove()\r\n            )\r\n            .transition()\r\n            .duration(600)\r\n            .ease(d3.easeExpInOut)\r\n            .attr(\"delay\", \"1000\")\r\n            .attr(\"d\", this.area)\r\n            .style(\"fill\", function (d) { return t.colorScheme[d.key] })\r\n            .attr(\"clip-path\", \"url(#zoom)\");\r\n    }\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport * as d3 from \"d3\";\r\nconst styles = require(\"../styles.js\");\r\n\r\nexport let streamTooltipFactoryMixin = {\r\n    tooltipKeys: \"\",\r\n    setTooltipKeys(keys) {\r\n        this.tooltipKeys = keys;\r\n    },\r\n\r\n    createBars() {\r\n        let t = this;\r\n        let currentDay = new Date(this.data[0].date), nextDay = new Date(this.data[0].date);\r\n        nextDay.setDate(nextDay.getDate() + 1);\r\n        let widthTooltipBars = this.xScale(nextDay) - this.xScale(currentDay);\r\n        // d3.select(this.focus.node().parentNode)\r\n        this.ttBars = this.focus\r\n            .selectAll(\".plot-rect\")\r\n            .remove()\r\n            .exit()\r\n            .data(this.streamData)\r\n            .enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"plot-rect\")\r\n            .on(\"mouseover\", function () {\r\n\r\n            })\r\n            .attr(\"x\", function (d) {\r\n                return t.xScale(new Date(d.date));\r\n            })\r\n            .attr(\"width\", function (d, i) {\r\n                return widthTooltipBars;\r\n            })\r\n            .attr(\"height\", 1)\r\n            .attr(\"border\", \"1px solid black\")\r\n            .style(\"fill\", \"white\")\r\n            .style(\"opacity\", 0);\r\n    },\r\n\r\n    updateBars() {\r\n        let t = this;\r\n        let currentDay = new Date(this.data[0].date), nextDay = new Date(this.data[0].date);\r\n        nextDay.setDate(nextDay.getDate() + 1);\r\n        let widthTooltipBars = this.xScale(nextDay) - this.xScale(currentDay);\r\n        this.ttBars = this.ttBars\r\n            .selectAll(\".plot-rect\")\r\n            .data(this.streamData, d => d.date)\r\n\r\n            this.ttBars\r\n                .enter()\r\n                .append(\"rect\")\r\n                .join(this.ttBars)\r\n                .merge(this.ttBars)\r\n                .attr(\"class\", \"plot-rect\")\r\n                .attr(\"x\", function (d) {\r\n                    return t.xScale(new Date(d.date));\r\n                })\r\n                .attr(\"width\", function (d, i) {\r\n                    return widthTooltipBars;\r\n                })\r\n                .attr(\"height\", 1)\r\n                .attr(\"border\", \"1px solid black\")\r\n                .style(\"fill\", \"white\")\r\n                .style(\"opacity\", 0);\r\n    },\r\n\r\n    createLineChartTooltip(event, infoDots, id, property) {\r\n        let left = event.pageX + 5;\r\n        let top = event.pageY + 5;\r\n        //Draw tooltip\r\n        d3.select(\"#\".concat(this.containerId))\r\n            .insert(\"div\", \":first-child\")\r\n            .attr(\"id\", id)\r\n            .attr(\"width\", \"100px\")\r\n            .attr(\"height\", \"100px\")\r\n            .style(\"background\", styles.ttBackground)\r\n            .style(\"padding\", \"10px\")\r\n            .style(\"cursor\", \"none\")\r\n            .style(\"border\", `1px ${styles.background_colour} solid`)\r\n            .style(\"display\", \"inline-block\")\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"left\", left + \"px\")\r\n            .style(\"top\", top + \"px\")\r\n            .html(\"<p>\" + infoDots.date.toString().split(/[0-9]{2}:/)[0] + \"</p>\"\r\n                + \"<p> \" + property + \" </p>\"\r\n                + \"<br><span class=\\\"toolTip__vehicle-dot_el\\\"></span> ELECTRIC : \" + Math.round(infoDots[\"ELECTRIC\"] * 100) / 100\r\n                + \"<br><span class=\\\"toolTip__vehicle-dot_EURO6\\\"></span> EURO6 : \" + Math.round(infoDots[\"EURO6\"] * 100) / 100\r\n                + \"<br><span class=\\\"toolTip__vehicle-dot_EURO5\\\"></span> EURO5 : \" + Math.round(infoDots[\"EURO5\"] * 100) / 100\r\n                + \"<br><span class=\\\"toolTip__vehicle-dot_EURO4\\\"></span> EURO4 : \" + Math.round(infoDots[\"EURO4\"] * 100) / 100\r\n                + \"<br><span class=\\\"toolTip__vehicle-dot_EURO3\\\"></span> EURO3 : \" + Math.round(infoDots[\"EURO3\"] * 100) / 100\r\n                + \"<br><span class=\\\"toolTip__vehicle-dot_EURO2\\\"></span> EURO2 : \" + Math.round(infoDots[\"EURO2\"] * 100) / 100);\r\n    },\r\n\r\n    drawLineChartTooltip (event, infoDots, ttName, property) {\r\n        let left = event.pageX + 5;\r\n        let top = event.pageY + 5;\r\n        //Select tooltip\r\n    \r\n        let timeStamp = infoDots.date.toString();\r\n        if (timeStamp.split(\" \")[4] === \"00:00:00\") {\r\n            timeStamp = infoDots.date.toString().split(/[0-9]{2}:/)[0];\r\n        }\r\n    \r\n        d3.select(\"#\".concat(this.containerId))\r\n            .select(\"#\".concat(ttName))\r\n            .style(\"background\", styles.ttBackground)\r\n            .style(\"display\", \"inline-block\")\r\n            .style(\"left\", left + \"px\")\r\n            .style(\"top\", top + \"px\")\r\n            .html(\"<p>\" + timeStamp + \"</p>\"\r\n            + \"<p> \" + property + \" </p>\"\r\n            + \"<br><span class=\\\"toolTip__vehicle-dot_el\\\"></span> ELECTRIC : \" + Math.round(infoDots[\"ELECTRIC\"] * 100) / 100\r\n            + \"<br><span class=\\\"toolTip__vehicle-dot_EURO6\\\"></span> EURO6 : \" + Math.round(infoDots[\"EURO6\"] * 100) / 100\r\n            + \"<br><span class=\\\"toolTip__vehicle-dot_EURO5\\\"></span> EURO5 : \" + Math.round(infoDots[\"EURO5\"] * 100) / 100\r\n            + \"<br><span class=\\\"toolTip__vehicle-dot_EURO4\\\"></span> EURO4 : \" + Math.round(infoDots[\"EURO4\"] * 100) / 100\r\n            + \"<br><span class=\\\"toolTip__vehicle-dot_EURO3\\\"></span> EURO3 : \" + Math.round(infoDots[\"EURO3\"] * 100) / 100\r\n            + \"<br><span class=\\\"toolTip__vehicle-dot_EURO2\\\"></span> EURO2 : \" + Math.round(infoDots[\"EURO2\"] * 100) / 100);\r\n    },\r\n\r\n    addTooltipToSvg(ttName, ttTitle) {\r\n        let widthTooltipBars = this.graphBounds.xaxis / this.streamData.length;\r\n        let t = this;\r\n        this.focus.on(\"mousemove\", function (event) {\r\n            let onDot = false;\r\n            for (let area of t.streamData) {\r\n                //If the dots are hovered on\r\n                if (d3.pointer(event)[0] > t.xScale(new Date(area.date))\r\n                    && d3.pointer(event)[0] < t.xScale(new Date(area.date)) + widthTooltipBars) {\r\n                    //set onDot\r\n                    onDot = true;\r\n                    //get the tooltip info\r\n                    let infoDots = t.streamData.filter(d => \r\n                        new Date(d.date).getTime() === new Date(area.date).getTime())[0];\r\n                    let engineTypesEmissions = [];\r\n                    for (let key of t.tooltipKeys) {\r\n                        engineTypesEmissions.push({\r\n                            emissions: infoDots[key],\r\n                            engine: key\r\n                        });\r\n                    }\r\n                    //See if the tooltip exists\r\n                    if (d3.select(\"#\".concat(t.containerId))\r\n                        .select(\"#\".concat(ttName))\r\n                        .empty()\r\n                    ) {\r\n                        t.createLineChartTooltip(event, area, ttName, ttTitle);\r\n                        d3.select(\"body\")\r\n                            .selectAll(\".plot-rect\")\r\n                            .filter(d => { return d.date === area.date; })\r\n                            .attr(\"height\", t.graphBounds.yaxis)\r\n                            .style(\"opacity\", 0.4)\r\n                    }\r\n                    //If tooltip exists select and draw\r\n                    else {\r\n                        t.drawLineChartTooltip(event, area, ttName, ttTitle);\r\n                        d3.select(\"body\")\r\n                            .selectAll(\".plot-rect\")\r\n                            .attr(\"height\", 1)\r\n                            .style(\"opacity\", 0)\r\n                        d3.select(\"body\")\r\n                            .selectAll(\".plot-rect\")\r\n                            .filter(d => { return d.date === area.date; })\r\n                            .attr(\"height\", t.graphBounds.yaxis)\r\n                            .style(\"opacity\", 0.4)\r\n                    }\r\n                }\r\n            }\r\n            //If not on dot hide\r\n            if (onDot === false) {\r\n                d3.select(\"body\")\r\n                    .select(\"#\".concat(ttName))\r\n                    .attr(\"fill\", \"none\")\r\n                    .style(\"display\", \"none\");\r\n                d3.select(\"body\")\r\n                    .selectAll(\".plot-rect\")\r\n                    .attr(\"height\", 1)\r\n                    .style(\"opacity\", 0)\r\n            }\r\n        })\r\n        .on(\"mouseout\", function (d) {\r\n            //If selection not empty, remove tooltip on mouse leave\r\n            if (!d3.select(\"#\".concat(t.containerId))\r\n                .select(\"#\".concat(ttName))\r\n                .empty()\r\n            ) {\r\n                d3.select(\"#\".concat(ttName))\r\n                    .attr(\"fill\", \"none\")\r\n                    .style(\"display\", \"none\");\r\n                d3.selectAll(\".plot-rect\")\r\n                    .attr(\"height\", 1)\r\n                    .style(\"opacity\", 0)\r\n            }\r\n        })\r\n        .on(\"mouseleave\", function (d) {\r\n            //If selection not empty, remove tooltip on mouse leave\r\n            if (\r\n                !d3.select(\"#\".concat(t.containerId))\r\n                .select(\"#\".concat(ttName))\r\n                .empty()\r\n            ) {\r\n                d3.select(\"#\".concat(ttName))\r\n                    .attr(\"fill\", \"none\")\r\n                    .style(\"display\", \"none\");\r\n                d3.selectAll(\".plot-rect\")\r\n                    .attr(\"height\", 1)\r\n                    .style(\"opacity\", 0)\r\n            }\r\n        })\r\n    }\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React, { useState } from 'react';\r\nimport store from '../redux/store.js';\r\n\r\nlet modelData = require('./modelData');\r\n\r\nexport function processStreamData(data) {\r\n    let filters = store.getState().filters;\r\n    let keys = [\"date\"].concat(modelData.engine_types);\r\n\r\n    // Filter data according to UI\r\n    keys = keys.filter(d => filters.class[d] || d === \"date\")\r\n\r\n    let p = \"co2\";\r\n\r\n    let drawData = [];\r\n    data.forEach((d) => {\r\n        if (keys.includes(d.engine_type)) {\r\n            let obj = {};\r\n            obj.date = d.date;\r\n            obj[d.engine_type] = d[p];\r\n            drawData.push(obj);\r\n        }\r\n    })\r\n    let final = [];\r\n    let reducedDates = Array.from(new Set(drawData.map(d => d.date)));\r\n    reducedDates.sort((a, b) => {\r\n        if (new Date(a).getTime() > new Date(b).getTime()) {\r\n            return 1;\r\n        }\r\n        if (new Date(a).getTime() < new Date(b).getTime()) {\r\n            return -1;\r\n        }\r\n        return 0;\r\n    });\r\n    for (let d of reducedDates) {\r\n        let newObj = {};\r\n        keys.forEach(key => {\r\n            newObj[key] = 0;\r\n            if (key === \"date\") {\r\n                newObj[key] = d;\r\n            }\r\n        })\r\n        final.push(newObj);\r\n    }\r\n    for (let d of final) {\r\n        for (let e of drawData) {\r\n            //On the same date\r\n            if (d.date === e.date) {\r\n                //Only if keys part of keys\r\n                let key = Object.keys(e)[1];\r\n                d[key] = e[key];\r\n            }\r\n        }\r\n    }\r\n    return final;\r\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React, { useEffect } from 'react';\r\n\r\nimport store from 'redux/store.js';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { addWindow, extractWindow } from '../redux/windowSlice.js';\r\nimport { setStreamData } from '../redux/dataSlice.js';\r\n\r\nimport styled from \"styled-components\";\r\nimport LoadingBar from '../components/loadingBar.js';\r\nimport SideMenuLeft from '../components/sideMenuLeft.js';\r\nimport WindowComponent from '../components/window-component.js';\r\n\r\nimport * as d3Graph from '../d3/graph.js';\r\nimport * as d3StreamGraph from '../d3/streamGraphMixin.js';\r\nimport { streamTooltipFactoryMixin } from \"../d3/tooltipMixin.js\";\r\n\r\nimport { processStreamData } from \"../models/streamModel.js\";\r\n\r\nlet modelData = require('../models/modelData.js')\r\n\r\nconst PageContainer = styled.div`\r\n    display: flex;\r\n    flex: 1 1 auto;\r\n    height: 100%;\r\n    overflow: hidden;\r\n`;\r\n\r\nconst PageContainerVertical = styled(PageContainer)`\r\n    flex-direction: column;\r\n    overflow-y: auto;\r\n`;\r\n\r\nexport default function Visualisations(props) {\r\n    let dispatch = useDispatch();\r\n    //App\r\n    const url = useSelector(state => state.envVars.url);\r\n    //Page\r\n    const streamData = useSelector(state => state.data.streamData);\r\n    const windows = useSelector(state => state.windows);\r\n    //Filters\r\n    const granularity = useSelector(state => state.filters.granularity);\r\n    const classes = useSelector(state => state.filters.class);\r\n    const startTime = useSelector(state => state.filters.startTime);\r\n    const endTime = useSelector(state => state.filters.endTime);\r\n\r\n    function getRenderedComponentFunction(windowId) {\r\n        if (windowId != \"overview_window\") {\r\n            return createGraph(windowId, d3Graph.axisDateMixin,d3Graph.axisContinuousMixin, d3StreamGraph.streamGraphMixin,streamTooltipFactoryMixin)\r\n        }\r\n        return createGraph(windowId, d3Graph.axisDateMixin, d3Graph.axisContinuousMixin, d3StreamGraph.streamGraphMixin);\r\n    }\r\n\r\n    function createGraph (windowId, ...mixins) {\r\n        let graph = new d3Graph.D3Graph(windowId)\r\n        for (let mixin of mixins) {\r\n            Object.assign(graph, mixin);\r\n        }\r\n        return graph;\r\n    }\r\n\r\n    function initGraphs() {\r\n        let graphToDraw = store.getState().windows.windowRenderComponent\r\n        if (graphToDraw === \"Stream Graph\")\r\n            windows.value.forEach(d => createStreamGraph(d.windowComponent))\r\n        if (graphToDraw === \"Heat Chart\")\r\n            windows.value.forEach(d => createStreamGraph(d.windowComponent))\r\n    }\r\n\r\n    function createStreamGraph(window) {\r\n        if (window != undefined) {\r\n            let vis = window.props.renderedComponent;\r\n    \r\n            //Assign date mixin for the stream graph\r\n            vis.init();\r\n                \r\n            vis.setData(streamData);\r\n            vis.setColorScheme(modelData.engine_colours);\r\n            vis.setKeys(modelData.engine_types);\r\n            vis.setStreamData(processStreamData(streamData));\r\n\r\n            // vis.setData(streamData);\r\n            //Set visualisation xaxis incase it needs to be redrawn\r\n            vis.setXAxis(vis.createXAxis([new Date(2019, 0, 1), new Date(2019, 11, 10)], \"Yes\"));\r\n            vis.drawXAxis(vis.getXAxis(), 0, [new Date(2019, 0, 1), new Date(2019, 11, 10)]);\r\n    \r\n            vis.setYAxis(vis.createYAxis([0, 0], \"Yes\"));\r\n\r\n            vis.enter();\r\n            vis.render();\r\n            if (window.props.id != \"overview_window\") {\r\n                // Create the tooltip\r\n                vis.setTooltipKeys(modelData.engine_types);\r\n                vis.addTooltipToSvg(\"tt-main\", \"CO2\");\r\n                // Create tt bars\r\n                vis.createBars();\r\n                // vis.updateBars();\r\n            } else {\r\n                let w1 = store.getState().windows.value[0].windowComponent.props.renderedComponent,\r\n                w2 = store.getState().windows.value[1].windowComponent.props.renderedComponent;\r\n                w1.addBrushAndZoom(w2, w1);\r\n            }\r\n        }\r\n    }\r\n\r\n    function redrawGraphs(newData) {\r\n        windows.value.forEach(d => renderStreamGraph(d.windowComponent, newData))\r\n    }\r\n\r\n    function renderStreamGraph(window, newData) {\r\n        let vis = window.props.renderedComponent;\r\n        vis.setData(newData);\r\n        vis.setStreamData(processStreamData(newData));\r\n        vis.enter();\r\n        vis.render();\r\n    }\r\n\r\n    // Call use effect only once to fetch data required for visualisations\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            let d1 = '2019-01-01', d2 = '2019-12-10';\r\n            let fetchURL = encodeURI(`${url}/${granularity}/wellington/${d1}/${d2}/${startTime}/${endTime}`);\r\n            let res = await fetch(fetchURL);\r\n            const json = await res.json();\r\n            dispatch(setStreamData(json));\r\n            let firstWindow = (\r\n                <WindowComponent key={\"vis-window_0\"}\r\n                    id={\"vis-window_0\"}\r\n                    renderedComponent={getRenderedComponentFunction(\"vis-window_0\")}\r\n                />\r\n            )\r\n            dispatch(addWindow(firstWindow));\r\n            let overview = (\r\n                <WindowComponent id={\"overview_window\"}\r\n                    id={\"overview_window\"}\r\n                    renderedComponent={getRenderedComponentFunction(\"overview_window\")}\r\n                />\r\n            )\r\n            dispatch(addWindow(overview));\r\n        }\r\n\r\n        fetchData();\r\n    }, [])\r\n\r\n    /**\r\n     * Call use effect to recall flask when granularity changes\r\n     * \r\n     * TODO: Add logic to stop unneccessary reloading\r\n     */\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            let d1 = '2019-01-01', d2 = '2019-12-10';\r\n            let fetchURL = encodeURI(`${url}/${granularity}/wellington/${d1}/${d2}/${startTime}/${endTime}`);\r\n            let res = await fetch(fetchURL);\r\n            const json = await res.json();\r\n            console.log(\"NEW JSON DATA: \", json)\r\n            dispatch(setStreamData(json));\r\n            redrawGraphs(json);\r\n        }\r\n        fetchData();\r\n    }, [granularity, startTime, endTime])\r\n\r\n    /**\r\n     * Call use effect to rerender window when filters change\r\n     */\r\n    useEffect(() => {\r\n        windows\r\n            .value\r\n            .map(window => {\r\n                let vis = window.windowComponent.props.renderedComponent\r\n                console.log(processStreamData(streamData))\r\n                vis.setStreamData(processStreamData(streamData));\r\n                vis.render();\r\n                // if (vis.id != \"overview_window\") {\r\n                //     // Update the tooltip\r\n                //     vis.addTooltipToSvg(\"tt-main\", \"CO2\");\r\n                //     // Update tt bars\r\n                //     vis.updateBars();\r\n                // }\r\n            })\r\n    }, [classes])\r\n\r\n    /** \r\n     * Call use effect to rerender components in window when windows state changes\r\n     * \r\n     */ \r\n    useEffect(() => {\r\n        initGraphs();\r\n    }, [windows])\r\n\r\n    return (\r\n        <>\r\n            <PageContainer>\r\n                {/* Loading bar */}\r\n                <LoadingBar />\r\n                {/* Side menu left */}\r\n                <SideMenuLeft />\r\n                {/* Visualisation selection options */}\r\n                {/* Side menu right? */}\r\n                {/* Visualisation filters */}\r\n                {/* Visualisation container */}\r\n                <PageContainerVertical>\r\n                    {useSelector(state => state.windows)\r\n                        .value\r\n                        .map(window => {\r\n                            let r = (<WindowComponent key={window.windowComponent.props.id}\r\n                                id={window.windowComponent.props.id}\r\n                                renderedComponent={window.windowComponent.props.renderedComponent}\r\n                                // componentDidMountFunction={() => drawGraphs(r)}\r\n                            />)\r\n                            return r;\r\n                        })\r\n                }\r\n                </PageContainerVertical>\r\n                {/*  */}\r\n                {/*  */}\r\n            </PageContainer>\r\n        </>\r\n    );\r\n}","export default __webpack_public_path__ + \"static/media/GW_Logo.59e7ae2d.png\";","/**\n * @author Chris Todd, chriswilltodd@gmail.com\n * Github: chriswtodd\n */ \n\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { BrowserRouter as Router, Route, Link, Switch } from \"react-router-dom\";\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setUrl } from 'redux/envVarsSlice.js';\n\n// Page components for router\nimport Visualisations from './views/visualisations.js';\n\nimport logo from './components/GW_Logo.png';\nconst Logo = styled.img`\n  height: 45px;\n  border-right: 1px solid rgba(255, 255, 255, 0.3);\n  padding-left: 40px;\n  padding-right: 105px;\n`;\n\nrequire('dotenv').config()\nlet styles = require('../src/styles.js');\n\nconst buttons = [\n  {\n    \"label\" : \"Home\", \n    \"to\": \"/\",\n    \"component\" : \"\"\n  },\n  {\n    \"label\": \"Tutorial - User Interface\",\n    \"to\": \"/tut1\",\n    \"component\" : \"\"\n  },\n  {\n    \"label\" : \"Tutorial - Visualisations\",\n    \"to\": \"/tut2\",\n    \"component\" : \"\"\n  },\n  {\n    \"label\" : \"BEVis Tool\",\n    \"to\": \"/visualisations\",\n    \"component\" : Visualisations\n  },\n  {\n    \"label\" : \"User Study\",\n    \"to\": \"/tut1\",\n    \"component\" : \"\"\n  }\n]\n  \nconst Button = styled.button`\n  font: 400 18px Roboto;\n  z-index: 1000;\n  color: ${styles.text_colour};\n  background: ${styles.background_colour}\n  padding: 0 0.6em;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: none;\n  border-right: 1px solid rgba(255, 255, 255, 0.3);\n  border-left: none;\n  border-top: none;\n  border-bottom: none;\n  user-select: none;\n  cursor: pointer;\n  transition: ease background-color 250ms;\n  &:hover {\n    background: rgba(255, 255, 255, 0.164);\n  }\n  &:disabled {\n    cursor: default;\n    opacity: 0.9;\n  }\n  -webkit-writing-mode: none;\ntext-rendering: none;\nletter-spacing: none;\nword-spacing: none;\ntext-transform: none;\ntext-indent: none;\ntext-shadow: none;\n`;\n\nButton.defaultProps = {\n  theme: \"blue\"\n};\n\nconst ButtonToggle = styled(Button)`\n\n  ${({ active }) =>\n    active &&\n    `\n    opacity: 1;\n    background-color: rgba(255, 255, 255, 0.1);\n  `}\n`;\n\n//Header styles\nconst Header = styled.div`\n  height: ${styles.header_height};\n  width: 100%;\n  padding: 0px 10px;\n  align-items: center;\n  justify-content: left;\n  z-index: 1;\n  position: relative;\n  box-shadow: var(--container-shadow);\n  background: transparent url(./imgs/banner.jpg);\n  background-color: ${styles.background_colour}\n  grid-column-start: 1;\n  grid-column-end: 3;\n  display: flex;\n  flex-flow: row nowrap;\n`;\n\n//Remove underline\nconst LinkUnstyled = styled(Link)`\n  text-decoration: none;\n  height: 100%;\n`;\n\nconst MainFlex = styled.main`\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n`;\n\nexport default function App() {\n  let dispatch = useDispatch();\n  const [active, setActive] = useState(buttons[0]);\n  console.log(window.location.href);\n  dispatch(setUrl(window.location.href))\n  //Set body\n  componentWillMount();\n  return (\n    <Router>\n      <MainFlex>\n        <nav>\n          <Header id='header' >\n            <Logo src={logo} />\n            {buttons.map((type) => (\n              <LinkUnstyled to={type.to}>\n                <ButtonToggle active={active === type.label} onClick={() => setActive(type.label)}>\n                  {type.label}\n                </ButtonToggle>\n              </LinkUnstyled>\n            ))}\n          </Header>\n        </nav>\n        <Switch>\n          {buttons.map((type) => (\n            <Route path={type.to} exact component={type.component} />\n          ))}\n          \n          <Route render={() => <h1>404: page not found</h1>} />\n\n        </Switch>\n      </MainFlex>\n    </Router>\n  );\n}\n\n//Apply body styles\nlet componentWillMount = function () {\n  for (let i in styles.body) {\n    document.body.style[i] = styles.body[i];\n  }\n}","/**\r\n * @author Chris Todd, chriswilltodd@gmail.com\r\n * Github: chriswtodd\r\n */ \r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nimport { Provider } from 'react-redux';\r\nimport store from '../src/redux/store.js'\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>\r\n    , \r\n    document.getElementById(\"root\")\r\n)","let modelData = {\r\n    engine_colours: {\r\n    \"ELECTRIC\": \"#3cc0fd\",\r\n    \"EURO6\": \"#a3f383\",\r\n    \"EURO5\": \"#e2f750\",\r\n    \"EURO4\": \"#fdad0f\",\r\n    \"EURO3\": \"#717C71\",\r\n    \"EURO2\": \"#4F4537\",\r\n    \"EURO1\": \"#292121\",\r\n    \"PRE-EURO\": \"#ff0000\"\r\n},\r\n\r\n engine_types: [\r\n    \"PRE-EURO\",\r\n    \"EURO1\",\r\n    \"EURO2\",\r\n    \"EURO3\",\r\n    \"EURO4\",\r\n    \"EURO5\",\r\n    \"EURO6\",\r\n    \"ELECTRIC\",\r\n    ]\r\n}\r\n\r\nmodule.exports = modelData;"],"sourceRoot":""}