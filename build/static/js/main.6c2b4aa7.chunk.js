(this["webpackJsonpreact-test-app"]=this["webpackJsonpreact-test-app"]||[]).push([[0],{20:function(t,e){var n={background_colour:"rgba(0, 120, 138, 0.9);",text_colour:"rgb(248, 248, 248);",text_colour_neg:"rgb(50, 50, 50);",body:{margin:0,height:"100%",width:"100%","font-family":"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},html:{height:"100%"},header_height:"50px",side_menu_width:"300px",side_menu_background:"rgba(250, 250, 250, 1)",side_menu_text:"rgba(50, 50, 50, .8)",drop_down_header_background:"rgba(0, 120, 138, 0.9);",window_header_height:"40px",window_background_colour:"rgba(0,0,0,0.2)",ttBackground:"linear-gradient(180deg, rgba(255,255,255,1) 0%, rgba(250,250,250,1) 88%, rgba(248,248,248,1) 100%)",convertToInt:function(t){return parseInt(t.split("p")[0])}};t.exports=n},238:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n.n(a),i=n(10),r=n.n(i),s=n(13),c=n(6),l=n(7),d=n(76),u=n(11),p=n(21),h=n.n(p),f=n(24),b=n(72),x=n(27),g=n(38);var m,j,y,v,O,w=Object(x.b)({name:"windows",initialState:{value:[],windowRenderComponent:"Stream Graph",selectedWindow:"vis-window_0"},reducers:{addWindow:function(t,e){console.log(t,e),t.value=function(t,e){var n=t.slice();return n.splice(e.index,0,e.item),console.log(n,e),n}(t.value,{index:t.value.length,item:{id:"vis-window_"+t.value.length,windowComponent:e.payload}})},removeWindow:function(t,e){t.value=t.value.filter((function(t){return t.id!=e}))},setWindowRenderComponent:function(t,e){t.windowRenderComponent=e.payload}}}),k=w.actions,_=k.addWindow,E=(k.removeWindow,k.setWindowRenderComponent),S=w.reducer,R=Object(x.b)({name:"data",initialState:{streamData:{},heatData:{}},reducers:{setStreamData:function(t,e){t.streamData=e.payload},setHeatData:function(t,e){t.heatData=e.payload}}}),A=R.actions.setStreamData,C=R.reducer,T=Object(x.b)({name:"data",initialState:{granularity:"day",startTime:"00:00",endTime:"23:59",class:{"PRE-EURO":!0,EURO1:!0,EURO2:!0,EURO3:!0,EURO4:!0,EURO5:!0,EURO6:!0,ELECTRIC:!0},routes:""},reducers:{setClasses:function(t,e){t.class[e.payload]=!t.class[e.payload]},setReqGranularity:function(t,e){console.log(t,e),t.granularity=e.payload},setStartTime:function(t,e){t.startTime=e.payload},setEndTime:function(t,e){t.endTime=e.payload}}}),D=T.actions,U=D.setClasses,B=D.setReqGranularity,z=D.setStartTime,I=D.setEndTime,X=T.reducer,Y=Object(x.a)({reducer:{windows:S,data:C,filters:X}}),L=n(15),M=n(73),F=n(3),P=l.a.div(m||(m=Object(c.a)(["\n    background: white;\n    height: 35px;\n    width: 30%;\n    padding: 20px;\n    align-content: center;\n    align-items: center;\n    display: flex;\n    flex-direction: row;\n"]))),V=l.a.div(j||(j=Object(c.a)(["\n  background: var(--gradient-2);\n  width: 1%;\n  height: 100%;\n  padding: 15px;\n  "]))),W=l.a.text(y||(y=Object(c.a)(["\n    position: absolute;\n    align-self: center;\n    z-index: 51;\n    fill: #222;\n    color: #222;\n"]))),G=l.a.div(v||(v=Object(c.a)(["\n    position: fixed;\n    opacity: 0;\n    height: 100%;\n    width: 100%;\n    z-index: 50;\n    pointer-events: none;\n"]))),H=l.a.div(O||(O=Object(c.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: rgba(0,0,0,0.5);\n    height: 100%;\n    flex-direction: column;\n"])));function K(){var t=Object(M.b)({loading:!0,loaderProps:{style:{color:"rgba(0,120,138,100)",padding:"10px"},valueText:"Fetching data..."},indicator:Object(F.jsx)(M.a,{width:"150"})}),e=t.containerProps,n=t.indicatorEl;return Object(F.jsx)(G,{children:Object(F.jsxs)(H,{children:[Object(F.jsxs)("section",Object(g.a)(Object(g.a)({},e),{},{children:[n," "]})),Object(F.jsxs)(P,{children:[Object(F.jsx)(V,{}),Object(F.jsx)(W,{})]})]})})}var N,J,Z,q,Q,$=n(33),tt=n(34),et=n(57),nt=n(61),at=(n(219),n(20)),ot=l.a.div(N||(N=Object(c.a)(["\n    z-index: -1;\n    display: flex;\n    flex-direction: column;\n    top: 0px; left: 0;\n    background-color: ",";\n    height: 0;\n    width: ",";\n    opacity: 0;\n    transition: ease all 250ms;\n"])),at.side_menu_background,at.side_menu_width),it=Object(l.a)(ot)(J||(J=Object(c.a)(["\n  ","\n"])),(function(t){return t.open&&"\n    height: auto;\n    opacity: 1;\n  "})),rt=l.a.button(Z||(Z=Object(c.a)(["\n    font: 400 18px Roboto;\n    z-index: 1000;\n    color: ",";\n    padding: 0 0.6em;\n    height: 0px;\n    display: flex;\n    margin: 5px;\n    opacity: 1;\n    justify-content: left;\n    align-items: center;\n    box-shadow: none;\n    border-radius: 25px;\n    border: 1px solid ",";\n    user-select: none;\n    cursor: pointer;\n    transition: ease all 250ms;\n    background-color: rgba(255, 255, 255, 0.1);\n    &:hover {\n        background: ",";\n        color: ",";\n    }\n    &:disabled {\n        cursor: default;\n        opacity: 0.9;\n    }\n    -webkit-writing-mode: none;\n    text-rendering: none;\n    letter-spacing: none;\n    word-spacing: none;\n    text-transform: none;\n    text-indent: none;\n    text-shadow: none;\n"])),at.side_menu_text,at.background_colour,at.background_colour,at.text_colour);rt.defaultProps={theme:"blue"};var st=Object(l.a)(rt)(q||(q=Object(c.a)(["\n  ","\n  ","\n"])),(function(t){return t.active&&"\n    opacity: 1;\n    background: ".concat(at.background_colour,"\n    color: ").concat(at.text_colour,";\n  ")}),(function(t){return t.open&&"\n    height: auto;\n    opacity: 1;\n  "})),ct=l.a.div(Q||(Q=Object(c.a)(["\n  width: 100%;\n  color: ",";\n  border-bottom: 1px solid ",";\n  font-weight: bold;\n  padding: 5px;\n"])),at.text_colour_neg,at.background_colour);function lt(t){var e=Object(L.c)();return Object(F.jsx)(st,{active:t.active===t.type.label,open:t.open,onClick:function(n){t.setActive(t.type.label),e(E(n.target.innerHTML))},children:t.type.label})}function dt(t){var e=Object(a.useState)(0),n=Object(s.a)(e,2),o=n[0],i=n[1],r=ve.filter((function(e){return e.label===t.open}));return 0!=r.length?r[0].entries.map((function(e){return Object(F.jsx)(lt,{active:o,type:e,setActive:i,open:t.open})})):Object(F.jsx)(F.Fragment,{})}var ut,pt,ht,ft,bt,xt=function(t){Object(et.a)(n,t);var e=Object(nt.a)(n);function n(t){return Object($.a)(this,n),e.call(this,t)}return Object(tt.a)(n,[{key:"render",value:function(){return Object(F.jsxs)(it,{open:this.props.open===this.props.type.label,children:[Object(F.jsx)(ct,{children:"Select a visualisation:"}),Object(F.jsx)(dt,{open:this.props.open,active:this.props.active,setActive:this.props.setActive})]})}}]),n}(o.a.Component),gt=n(58),mt=n(20),jt=l.a.button(ut||(ut=Object(c.a)(["\n    font: 400 18px Roboto;\n    z-index: 1000;\n    color: ",";\n    background: ","\n    width: ",";\n    height: 50px;\n    justify-content: left;\n    align-items: center;\n    padding: 0;\n    box-shadow: none;\n    border-right: 1px solid rgba(255, 255, 255, 0.3);\n    border-left: none;\n    border-top: 1px solid rgba(255, 255, 255, 0.3);\n    border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n    user-select: none;\n    cursor: pointer;\n    transition: ease all 250ms;\n    &:hover {\n        background: rgba(0, 120, 138, 0.7);\n    }\n    &:disabled {\n        cursor: default;\n        opacity: 0.9;\n    }\n    -webkit-writing-mode: none;\n    text-rendering: none;\n    letter-spacing: none;\n    word-spacing: none;\n    text-transform: none;\n    text-indent: none;\n    text-shadow: none;\n"])),mt.text_colour,mt.background_colour,mt.side_menu_width);jt.defaultProps={theme:"blue"};var yt=Object(l.a)(jt)(pt||(pt=Object(c.a)(["\n  ","\n"])),(function(t){return t.active&&"\n    height: auto;\n    opacity: 1;\n  "})),vt=Object(l.a)(gt.a)(ht||(ht=Object(c.a)(["\n    transform: translate(calc(100% - 10px), 0);\n"]))),Ot=Object(l.a)(vt)(ft||(ft=Object(c.a)(["\n  ","\n"])),(function(t){return t.active&&"\n    transform: rotate(90deg);\n  "})),wt=l.a.div(bt||(bt=Object(c.a)(["\n  height: 50px;\n  text-align: left;\n  float: left;\n"])));var kt,_t,Et,St,Rt,At,Ct,Tt=function(t){Object(et.a)(n,t);var e=Object(nt.a)(n);function n(t){var a;return Object($.a)(this,n),(a=e.call(this,t)).state={dropdownTitle:""},a}return Object(tt.a)(n,[{key:"render",value:function(){var t=this;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(yt,{active:this.props.active===this.props.type.label,onClick:function(){return(e=t).props.active===e.props.type.label?e.props.setActive(0):(e.setState({dropdownTitle:e.props.type.label}),e.props.setActive(e.props.type.label));var e},children:Object(F.jsxs)(wt,{children:[this.props.type.label,Object(F.jsx)(Ot,{active:this.props.active===this.props.type.label})]})}),Object(F.jsx)(xt,{open:this.props.active,type:this.props.type,active:this.props.active,setActive:this.props.setActive,title:this.state.dropdownTitle})]})}}]),n}(o.a.Component),Dt=n(103),Ut=n.n(Dt),Bt=n(270),zt=n(274);function It(t){var e=Object(a.useState)(t.defaultValue),n=Object(s.a)(e,2),o=n[0],i=n[1],r=Object(Bt.a)((function(t){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:t.spacing(1),marginRight:t.spacing(1),width:100}}}))();return Object(F.jsx)("form",{className:r.container,noValidate:!0,children:Object(F.jsx)(zt.a,{id:t.id,label:t.label,type:"time",defaultValue:t.defaultValue,className:r.textField,InputLabelProps:{shrink:!0},inputProps:{step:300},onChange:function(e){i(e.target.value),t.onChange(e)},value:o})})}var Xt=n(20),Yt=l.a.div(kt||(kt=Object(c.a)(["\n  height: 50px;\n  width: 100%;\n  text-align: left;\n  float: left;\n"]))),Lt=l.a.div(_t||(_t=Object(c.a)(["\n    font: 400 18px Roboto;\n    z-index: 1000;\n    color: ",";\n    background: ","\n    width: ",";\n    height: 50px;\n    justify-content: center;\n    align-items: center;\n    padding: 0;\n    display: flex;\n    flex-direction: column;\n    box-shadow: none;\n    border-right: 1px solid rgba(255, 255, 255, 0.3);\n    border-left: none;\n    border-top: 1px solid rgba(255, 255, 255, 0.3);\n    border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n    user-select: none;\n    cursor: pointer;\n    transition: ease all 250ms;\n    &:hover {\n        background: rgba(0, 120, 138, 0.7);\n    }\n    &:disabled {\n        cursor: default;\n        opacity: 0.9;\n    }\n    -webkit-writing-mode: none;\n    text-rendering: none;\n    letter-spacing: none;\n    word-spacing: none;\n    text-transform: none;\n    text-indent: none;\n    text-shadow: none;\n"])),Xt.text_colour,Xt.background_colour,Xt.side_menu_width);Lt.defaultProps={theme:"blue"};var Mt,Ft,Pt,Vt=Object(l.a)(Lt)(Et||(Et=Object(c.a)(["\n  ","\n"])),(function(t){return t.active&&"\n    height: auto;\n    opacity: 1;\n  "})),Wt=l.a.div(St||(St=Object(c.a)(["\n    background: white;\n    height: 0px;\n    width: 100%;\n    display: flex;\n    transition: all ease 0.2s;\n    display: hidden;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: center;\n    opacity: 0;\n    color: ",";\n"])),Xt.text_colour_neg),Gt=Object(l.a)(Wt)(Rt||(Rt=Object(c.a)(["\n  ","\n"])),(function(t){return t.active&&"\n    height: auto;\n    opacity: 1;\n  "})),Ht=Object(l.a)(gt.a)(At||(At=Object(c.a)(["\n    transform: translate(calc(100% - 10px), 0);\n"]))),Kt=Object(l.a)(Ht)(Ct||(Ct=Object(c.a)(["\n  ","\n"])),(function(t){return t.active&&"\n    transform: rotate(90deg);\n  "}));function Nt(t){var e=Object(a.useState)(!0),n=Object(s.a)(e,2),o=n[0],i=n[1];return Object(F.jsxs)(Vt,{active:o,children:[Object(F.jsxs)(Yt,{onClick:function(){return i(!o)},children:[t.label,Object(F.jsx)(Kt,{active:o})]}),Object(F.jsx)(Gt,{active:o,children:t.children})]})}var Jt,Zt,qt,Qt=n(20),$t=l.a.input(Mt||(Mt=Object(c.a)(["\n    color: ","\n"])),Qt.text_colour_neg),te=l.a.label(Ft||(Ft=Object(c.a)(["\n    color: ","\n"])),Qt.text_colour_neg),ee=l.a.div(Pt||(Pt=Object(c.a)(["\n    height: auto;\n    width: auto;\n    display: flex;\n    flex-direction: row;\n    padding: 2.5px;\n"])));function ne(t){var e=Object(a.useState)(!0),n=Object(s.a)(e,2),o=n[0],i=n[1];return Object(F.jsxs)(ee,{children:[Object(F.jsx)($t,{type:"checkbox",id:t.id,name:t.name,checked:o,onChange:function(e){i(!o),t.callback(e,o)}}),Object(F.jsx)(te,{for:t.id,children:t.label})]})}var ae=n(20),oe=l.a.div(Jt||(Jt=Object(c.a)(["\n    display: flex;\n    // flex-direction: column;\n    flex-wrap: wrap;\n    justify-content: center;\n    width: 100%;\n    height: auto;\n    color: ","\n"])),ae.text_colour_neg),ie=l.a.div(Zt||(Zt=Object(c.a)(["\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-evenly;\n    color: ","\n"])),ae.text_colour_neg),re=l.a.text(qt||(qt=Object(c.a)(["\n    display: flex;\n    color: ","\n    border-bottom: 1px solid ","\n    padding: 5px;\n    width: 100%;\n"])),ae.text_colour_neg,ae.background_colour);function se(t){var e=Object(L.c)(),n=Object(L.d)((function(t){return t.filters})),o=Object(a.useState)("day"),i=Object(s.a)(o,2),r=i[0],c=i[1];return Object(F.jsxs)(Nt,{label:"Visualisation Filters",children:[Object(F.jsx)(re,{children:"Engine Classes:"}),Object(F.jsx)(oe,{id:"checkbox_engine-classes",children:void 0!=n?Object.keys(n.class).map((function(t){return Object(F.jsx)(ne,{id:t,name:t,label:t,callback:function(t){e(U(t.target.name))}})})):null}),Object(F.jsx)(re,{children:"Granularity:"}),Object(F.jsx)(oe,{id:"checkbox_granularity",children:Object(F.jsx)(Ut.a,{options:["day","hour"],name:"granularity",isStateful:!1,onChange:function(t){c(t),e(B(t))},value:r})}),Object(F.jsx)(re,{children:"Trips Between:"}),Object(F.jsxs)(ie,{children:[Object(F.jsx)(It,{id:"start_time",label:"Start Time",defaultValue:"00:00",onChange:function(t){e(z(t.target.value))}}),Object(F.jsx)(It,{id:"end_time",label:"End Time",defaultValue:"23:59",onChange:function(t){e(I(t.target.value))}})]})]})}var ce,le,de,ue,pe,he,fe,be,xe,ge,me=n(44),je=n(20),ye=l.a.div(ce||(ce=Object(c.a)(["\n    transition: opacity 0.2s, width 0.2s;\n    z-index: 20000;\n    display: flex;\n    flex-direction: column;\n    top: 0px; left: 0;\n    width: ",";\n    opacity: 1;\n    background-color: ",";\n"])),je.side_menu_width,je.side_menu_background),ve=(Object(l.a)(ye)(le||(le=Object(c.a)(["\n    ","\n"])),(function(t){return t.closed&&"\n        opacity: 0 !important;\n        width: 0%;\n        transition: width 0.5 linear;\n        "})),[{label:"Visualisation",entries:[{label:"Stream Graph",onClick:function(){}}]}]);Object(l.a)(me.b)(de||(de=Object(c.a)(["\ntransform: translate(calc(100% - 10px), 0);\n"]))),Object(l.a)(me.c)(ue||(ue=Object(c.a)(["\ntransform: translate(calc(100% - 10px), 0);\n"]))),Object(l.a)(me.d)(pe||(pe=Object(c.a)(["\ntransform: translate(calc(100% - 10px), 0);\n"]))),Object(l.a)(me.a)(he||(he=Object(c.a)(["\ntransform: translate(calc(100% - 10px), 0);\n"])));function Oe(){var t=Object(a.useState)("Visualisation"),e=Object(s.a)(t,2),n=e[0],o=e[1];return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(ye,{children:[ve.map((function(t){return Object(F.jsx)(Tt,{active:n,type:t,setActive:o})})),Object(F.jsx)(se,{})]})})}var we=n(20),ke=l.a.div(fe||(fe=Object(c.a)(["\n    // flex: 1 1 auto;\n    border: 2px rgba(0,0,0,0.4) solid;\n    box-shadow: 0px 0px 2px 3px ",";\n    width: 100%;\n    height: calc(100% - 300px);\n    display: flex;\n    flex-direction: column;\n\tmargin: 0;\n\tpadding: 0;\n\tz-index: 99;\n\tbackground: #fefefe;\n"])),we.window_background_colour),_e=l.a.div(be||(be=Object(c.a)(["\n    display: flex;\n    background-color: ",";\n    width: 100%;\n    height: ",";\n    cursor: all-scroll;\n    color: ",";\n    align-items: center;\n"])),we.window_background_colour,we.window_header_height,we.text_colour_neg),Ee=l.a.text(xe||(xe=Object(c.a)(["\n    font: 400 18px Roboto;\n    color: ",";\n    margin: 10px;\n"])),we.text_colour_neg);l.a.div(ge||(ge=Object(c.a)(["\n    background: #999;\n\topacity: 0.2;\n\n\twidth: 45%;\n\theight: 45%;\n\ttop: 20%;\n\tleft: 20%;\n\t\n\tposition: absolute;\n\tmargin: 0;\n\tpadding: 0;\n\tz-index: 98;\n\n\t-webkit-transition: all 0.25s ease-in-out;\n\t-moz-transition: all 0.25s ease-in-out;\n\t-ms-transition: all 0.25s ease-in-out;\n\t-o-transition: all 0.25s ease-in-out;\n    transition: all 0.25s ease-in-out;\n"])));var Se,Re,Ae=Object(L.b)((function(t){return console.log(t),{selectedComponent:t.windows.windowRenderComponent,class:t.filters.class}}))((function(t){return Object(a.useEffect)((function(){})),Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(ke,{id:t.id,style:(e=t.height,void 0!=e?{height:e}:{}),children:Object(F.jsx)(_e,{children:Object(F.jsx)(Ee,{children:t.headerText})})})});var e})),Ce=n(8),Te=n(20),De={createXAxis:function(t,e){return this.xScale=Ce.j().domain([new Date(2019,0,1),new Date(2019,11,10)]).range([0,this.graphBounds.xaxis]),this.gX=this.focus.append("g").attr("class","x").transition().duration(100).call(Ce.b(this.xScale)),this.gX.selectAll("text").attr("transform","rotate(45deg)").attr("text-anchor","start").attr("font-size","16px").attr("font-weight","bold").attr("y",10),this.focus.select(".x").append("text").attr("class","x-label").attr("font-size","16px").attr("font-weight","bold").style("text-anchor","start").style("fill","black").text(e),Ce.b(this.xScale)},drawXAxis:function(t,e,n){this.xScale.domain([new Date(2019,0,1),new Date(2019,11,10)]).range([0,this.graphBounds.xaxis]),this.gX=this.focus.select(".x").attr("class","x").attr("transform","translate(0,"+this.graphBounds.yaxis+")").call(this.xScale),this.gX.selectAll(".tick").attr("class","x-ticks").attr("y",25),this.focus.select(".x").selectAll("text").attr("text-anchor","start").attr("font-size","16px").attr("font-weight","bold").attr("y",10),this.focus.select(".x").append("text").attr("class","x-label").text(n)}},Ue={createYAxis:function(t,e){return this.yScale=Ce.i().range([this.graphBounds.yaxis,this.margin.top+this.margin.bottom]),this.gY=this.focus.append("g").attr("class","y").transition().duration(100).call(Ce.c(this.yScale)),this.gY.selectAll("text").attr("text-anchor","start").attr("transform","translate(-35, 0)").attr("font-size","14px").attr("font-weight","bold"),this.focus.select(".y").append("text").attr("transform","translate(-15, -5)").style("text-anchor","middle").text(e),Ce.c(this.yScale)},drawYAxis:function(t,e){this.yScale.domain([0,e]),this.gY=this.focus.select(".y").attr("class","y").call(this.yAxis),this.gY.selectAll("text").attr("text-anchor","start").attr("transform","translate(-35, 0)").attr("font-size","14px").attr("font-weight","bold"),this.focus.select(".y").append("text").attr("class","y-label").text(t)}},Be=function(){function t(e,n,a,o){Object($.a)(this,t),this.containerId=e,this.title=n,this.xAxis=a,this.yAxis=o,this.margin={top:10,bottom:45,left:75,right:75},this.graphBounds={xaxis:0,yaxis:0},this.zoomable=!1}return Object(tt.a)(t,[{key:"getContainer",value:function(){return this.container}},{key:"setContainer",value:function(t){this.container=t}},{key:"setZoomable",value:function(t){this.zoomable=t}},{key:"getTitle",value:function(){return this.title}},{key:"setTitle",value:function(t){this.title=t}},{key:"getXAxis",value:function(){return this.xAxis}},{key:"setXAxis",value:function(t){this.xAxis=t}},{key:"getYAxis",value:function(){return this.yAxis}},{key:"setYAxis",value:function(t){this.yAxis=t}},{key:"setG",value:function(){this.g=Ce.k("#".concat(this.containerId)).select(".focus").append("g").attr("id","plot")}},{key:"init",value:function(){var t="#".concat(this.containerId);Ce.k(t).select("#svg_parent_container").empty()||Ce.k(t).select("#svg_parent_container").remove(),this.svg=Ce.k(t).append("svg").attr("id","svg_parent_container"),this.width=Ce.k(t).node().offsetWidth,this.height=Ce.k(t).node().offsetHeight-this.margin.top-this.margin.bottom,this.graphBounds.xaxis=this.width-this.margin.left-this.margin.right,this.graphBounds.yaxis=this.height-Te.convertToInt(Te.window_header_height),this.svg.attr("width",this.width).attr("height",this.height),this.focus=this.svg.append("g").attr("class","focus").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.setG()}},{key:"applyStyle",value:function(t,e){var n=this.focus;t.forEach((function(t){n=n.select(t)}));for(var a=0,o=Object.keys(e);a<o.length;a++){var i=o[a];n.style(i,e[i])}}},{key:"applyStyleAll",value:function(t,e){var n=this.focus;t.forEach((function(t){n=n.selectAll(t)})),console.log(n);for(var a=0,o=Object.keys(e);a<o.length;a++){var i=o[a];console.log(i,e[i]),n.style(i,e[i])}}},{key:"draw",value:function(){this.init(),void 0!=this.getXAxis&&this.drawXAxis(this.getXAxis()),void 0!=this.getYAxis&&this.drawYAxis(this.getYAxis()),-1!=this.render()&&this.render()}},{key:"render",value:function(){return-1}},{key:"setData",value:function(t){this.data=t}}]),t}(),ze=(n(20),{area:Ce.a(),setColorScheme:function(t){this.colorScheme=t},setKeys:function(t){this.keys=t},setStreamData:function(t){this.streamData=t},calcStackHeight:function(t,e){return t.map((function(t){var n=0;return Object.keys(t).forEach((function(a){e.includes(a)&&(n+=t[a])})),n}))},addBrushAndZoom:function(t,e){var n=Ce.d().extent([[0,0],[t.graphBounds.xaxis,t.graphBounds.yaxis]]).on("brush",(function(n,a){if(void 0==n.sourceEvent)return;var o=n.selection||t.xScale.range(),i=Ce.p.scale(e.graphBounds.xaxis/(o[1]-o[0])).translate(-o[0],0);e.focus.selectAll(".x-ticks").remove().exit(),e.xScale.domain(o.map(t.xScale.invert,t.xScale)),e.gX.call(e.xAxis.scale(i.rescaleX(e.xScale))),e.focus.select("#plot").attr("transform","translate("+i.x+") scale("+i.k+",1)"),e.gX.selectAll(".tick").selectAll("text").attr("text-anchor","start").attr("transform","translate(-35, 0)").attr("font-size","14px").attr("font-weight","bold")})),a=Ce.o().scaleExtent([1,1/0]).translateExtent([[0,0],[e.graphBounds.xaxis,e.graphBounds.yaxis]]).extent([[0,0],[e.graphBounds.xaxis,e.graphBounds.yaxis]]).on("zoom",(function(a,o){if(void 0==a.sourceEvent)return;var i=a.transform;e.focus.selectAll(".x-ticks").remove().exit(),e.gX.call(e.xAxis.scale(i.rescaleX(e.xScale))),t.focus.select(".brush").call(n.move,e.xScale.range().map(i.invertX,i)),e.focus.select("#plot").attr("transform","translate("+i.x+") scale("+i.k+",1)"),e.gX.selectAll(".tick").selectAll("text").attr("text-anchor","start").attr("transform","translate(-35, 0)").attr("font-size","14px").attr("font-weight","bold")}));t.focus.append("g").attr("class","brush").call(n).call(n.move,e.xScale.range()),e.focus.select("#plot").remove(),e.focus.append("clipPath").attr("id","zoom").append("rect").attr("x","0").attr("y","0").attr("width",e.graphBounds.xaxis).attr("height",e.graphBounds.yaxis),e.g=e.focus.append("g").attr("id","plot").attr("clip-path","url(#zoom)"),e.focus.select("#plot").call(a),this.enter(),this.render()},enter:function(){var t=this;this.stackedData=Ce.m().offset(Ce.n).keys(this.keys)(this.streamData);var e=Ce.g(this.calcStackHeight(this.streamData,this.keys));this.drawYAxis(0,e),this.blankArea=Ce.a().x((function(e){return t.xScale(new Date(e.data.date))})).y0((function(e){return t.height-t.margin.bottom})).y1((function(e){return t.height-t.margin.bottom})).curve(Ce.e),this.path=this.g.selectAll(".mylayers").data(this.stackedData),this.path.enter().append("path").attr("class","mylayers").on("mouseover",(function(t,e){})).on("mousemove",(function(t,e){Ce.k(this).attr("stroke","black")})).on("mouseout",(function(){t.g.selectAll(".mylayers").transition().attr("opacity",1),Ce.k(this).attr("stroke","none")})).attr("opacity",1).style("fill",(function(e){return t.colorScheme[e.key]})).attr("d",this.blankArea).attr("clip-path","url(#zoom)")},render:function(){var t=this,e=this,n=Ce.g(this.calcStackHeight(this.streamData,this.keys));this.yScale.domain([0,n]),this.focus.select(".y").call(Ce.c(this.yScale)),this.stackedData=Ce.m().offset(Ce.n).keys(this.keys)(this.streamData),this.area=Ce.a().x((function(t,n){return e.xScale(new Date(t.data.date))})).y0((function(t){return e.yScale(t[0])})).y1((function(t){return e.yScale(t[1])})).curve(Ce.e),this.path=this.g.selectAll(".mylayers").data(this.stackedData),this.path.join((function(t){return t}),(function(t){return t}),(function(e){return e.attr("d",t.area).remove()})).transition().duration(600).ease(Ce.f).attr("delay","1000").attr("d",this.area).style("fill",(function(t){return e.colorScheme[t.key]})).attr("clip-path","url(#zoom)")}}),Ie=n(14),Xe=n(20),Ye={tooltipKeys:"",setTooltipKeys:function(t){this.tooltipKeys=t},createBars:function(){var t=this,e=new Date(this.data[0].date),n=new Date(this.data[0].date);n.setDate(n.getDate()+1);var a=this.xScale(n)-this.xScale(e);this.ttBars=this.focus.selectAll(".plot-rect").remove().exit().data(this.streamData).enter().append("rect").attr("class","plot-rect").on("mouseover",(function(){})).attr("x",(function(e){return t.xScale(new Date(e.date))})).attr("width",(function(t,e){return a})).attr("height",1).attr("border","1px solid black").style("fill","white").style("opacity",0)},updateBars:function(){var t=this,e=new Date(this.data[0].date),n=new Date(this.data[0].date);n.setDate(n.getDate()+1);var a=this.xScale(n)-this.xScale(e);this.ttBars=this.ttBars.selectAll(".plot-rect").data(this.streamData,(function(t){return t.date})),this.ttBars.enter().append("rect").join(this.ttBars).merge(this.ttBars).attr("class","plot-rect").attr("x",(function(e){return t.xScale(new Date(e.date))})).attr("width",(function(t,e){return a})).attr("height",1).attr("border","1px solid black").style("fill","white").style("opacity",0)},createLineChartTooltip:function(t,e,n,a){var o=t.pageX+5,i=t.pageY+5;Ce.k("#".concat(this.containerId)).insert("div",":first-child").attr("id",n).attr("width","100px").attr("height","100px").style("background",Xe.ttBackground).style("padding","10px").style("cursor","none").style("border","1px ".concat(Xe.background_colour," solid")).style("display","inline-block").style("position","absolute").style("left",o+"px").style("top",i+"px").html("<p>"+e.date.toString().split(/[0-9]{2}:/)[0]+"</p><p> "+a+' </p><br><span class="toolTip__vehicle-dot_el"></span> ELECTRIC : '+Math.round(100*e.ELECTRIC)/100+'<br><span class="toolTip__vehicle-dot_EURO6"></span> EURO6 : '+Math.round(100*e.EURO6)/100+'<br><span class="toolTip__vehicle-dot_EURO5"></span> EURO5 : '+Math.round(100*e.EURO5)/100+'<br><span class="toolTip__vehicle-dot_EURO4"></span> EURO4 : '+Math.round(100*e.EURO4)/100+'<br><span class="toolTip__vehicle-dot_EURO3"></span> EURO3 : '+Math.round(100*e.EURO3)/100+'<br><span class="toolTip__vehicle-dot_EURO2"></span> EURO2 : '+Math.round(100*e.EURO2)/100)},drawLineChartTooltip:function(t,e,n,a){var o=t.pageX+5,i=t.pageY+5,r=e.date.toString();"00:00:00"===r.split(" ")[4]&&(r=e.date.toString().split(/[0-9]{2}:/)[0]),Ce.k("#".concat(this.containerId)).select("#".concat(n)).style("background",Xe.ttBackground).style("display","inline-block").style("left",o+"px").style("top",i+"px").html("<p>"+r+"</p><p> "+a+' </p><br><span class="toolTip__vehicle-dot_el"></span> ELECTRIC : '+Math.round(100*e.ELECTRIC)/100+'<br><span class="toolTip__vehicle-dot_EURO6"></span> EURO6 : '+Math.round(100*e.EURO6)/100+'<br><span class="toolTip__vehicle-dot_EURO5"></span> EURO5 : '+Math.round(100*e.EURO5)/100+'<br><span class="toolTip__vehicle-dot_EURO4"></span> EURO4 : '+Math.round(100*e.EURO4)/100+'<br><span class="toolTip__vehicle-dot_EURO3"></span> EURO3 : '+Math.round(100*e.EURO3)/100+'<br><span class="toolTip__vehicle-dot_EURO2"></span> EURO2 : '+Math.round(100*e.EURO2)/100)},addTooltipToSvg:function(t,e){var n=this.graphBounds.xaxis/this.streamData.length,a=this;this.focus.on("mousemove",(function(o){var i,r=!1,s=Object(Ie.a)(a.streamData);try{var c=function(){var s=i.value;if(Ce.h(o)[0]>a.xScale(new Date(s.date))&&Ce.h(o)[0]<a.xScale(new Date(s.date))+n){r=!0;var c,l=a.streamData.filter((function(t){return new Date(t.date).getTime()===new Date(s.date).getTime()}))[0],d=[],u=Object(Ie.a)(a.tooltipKeys);try{for(u.s();!(c=u.n()).done;){var p=c.value;d.push({emissions:l[p],engine:p})}}catch(h){u.e(h)}finally{u.f()}Ce.k("#".concat(a.containerId)).select("#".concat(t)).empty()?(a.createLineChartTooltip(o,s,t,e),Ce.k("body").selectAll(".plot-rect").filter((function(t){return t.date===s.date})).attr("height",a.graphBounds.yaxis).style("opacity",.4)):(a.drawLineChartTooltip(o,s,t,e),Ce.k("body").selectAll(".plot-rect").attr("height",1).style("opacity",0),Ce.k("body").selectAll(".plot-rect").filter((function(t){return t.date===s.date})).attr("height",a.graphBounds.yaxis).style("opacity",.4))}};for(s.s();!(i=s.n()).done;)c()}catch(l){s.e(l)}finally{s.f()}!1===r&&(Ce.k("body").select("#".concat(t)).attr("fill","none").style("display","none"),Ce.k("body").selectAll(".plot-rect").attr("height",1).style("opacity",0))})).on("mouseout",(function(e){Ce.k("#".concat(a.containerId)).select("#".concat(t)).empty()||(Ce.k("#".concat(t)).attr("fill","none").style("display","none"),Ce.l(".plot-rect").attr("height",1).style("opacity",0))})).on("mouseleave",(function(e){Ce.k("#".concat(a.containerId)).select("#".concat(t)).empty()||(Ce.k("#".concat(t)).attr("fill","none").style("display","none"),Ce.l(".plot-rect").attr("height",1).style("opacity",0))}))}},Le=n(96);function Me(t){var e=Y.getState().filters,n=["date"].concat(Le.engine_types);n=n.filter((function(t){return e.class[t]||"date"===t}));var a=[];t.forEach((function(t){if(n.includes(t.engine_type)){var e={};e.date=t.date,e[t.engine_type]=t.co2,a.push(e)}}));var o=[],i=Array.from(new Set(a.map((function(t){return t.date}))));i.sort((function(t,e){return new Date(t).getTime()>new Date(e).getTime()?1:new Date(t).getTime()<new Date(e).getTime()?-1:0}));for(var r=function(){var t=c[s],e={};n.forEach((function(n){e[n]=0,"date"===n&&(e[n]=t)})),o.push(e)},s=0,c=i;s<c.length;s++)r();for(var l=0,d=o;l<d.length;l++){var u,p=d[l],h=Object(Ie.a)(a);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(p.date===f.date){var b=Object.keys(f)[1];p[b]=f[b]}}}catch(x){h.e(x)}finally{h.f()}}return o}var Fe=n(96),Pe=l.a.div(Se||(Se=Object(c.a)(["\n    display: flex;\n    flex: 1 1 auto;\n    height: 100%;\n    overflow: hidden;\n"]))),Ve=Object(l.a)(Pe)(Re||(Re=Object(c.a)(["\n    flex-direction: column;\n    overflow-y: auto;\n"])));var We,Ge,He,Ke,Ne,Je,Ze=n.p+"static/media/GW_Logo.59e7ae2d.png",qe=l.a.img(We||(We=Object(c.a)(["\n  height: 45px;\n  border-right: 1px solid rgba(255, 255, 255, 0.3);\n  padding-left: 40px;\n  padding-right: 105px;\n"]))),Qe=n(20),$e=[{label:"Home",to:"/",component:""},{label:"Tutorial - User Interface",to:"/tut1",component:""},{label:"Tutorial - Visualisations",to:"/tut2",component:""},{label:"BEVis Tool",to:"/visualisations",component:function(t){var e=Object(L.c)(),n=Object(L.d)((function(t){return t.data.streamData})),o=Object(L.d)((function(t){return t.windows})),i=Object(L.d)((function(t){return t.filters.granularity})),r=Object(L.d)((function(t){return t.filters.class})),s=Object(L.d)((function(t){return t.filters.startTime})),c=Object(L.d)((function(t){return t.filters.endTime}));function l(t){return"overview_window"!=t?d(t,De,Ue,ze,Ye):d(t,De,Ue,ze)}function d(t){for(var e=new Be(t),n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];for(var i=0,r=a;i<r.length;i++){var s=r[i];Object.assign(e,s)}return e}function u(t){if(void 0!=t){var e=t.props.renderedComponent;if(e.init(),e.setData(n),e.setColorScheme(Fe.engine_colours),e.setKeys(Fe.engine_types),e.setStreamData(Me(n)),e.setXAxis(e.createXAxis([new Date(2019,0,1),new Date(2019,11,10)],"Yes")),e.drawXAxis(e.getXAxis(),0,[new Date(2019,0,1),new Date(2019,11,10)]),e.setYAxis(e.createYAxis([0,0],"Yes")),e.enter(),e.render(),"overview_window"!=t.props.id)e.setTooltipKeys(Fe.engine_types),e.addTooltipToSvg("tt-main","CO2"),e.createBars();else{var a=Y.getState().windows.value[0].windowComponent.props.renderedComponent,o=Y.getState().windows.value[1].windowComponent.props.renderedComponent;a.addBrushAndZoom(o,a)}}}function p(t){o.value.forEach((function(e){return function(t,e){var n=t.props.renderedComponent;n.setData(e),n.setStreamData(Me(e)),n.enter(),n.render()}(e.windowComponent,t)}))}return Object(a.useEffect)((function(){function t(){return(t=Object(b.a)(h.a.mark((function t(){var n,a,o,r,d,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"2019-01-01","2019-12-10",a=encodeURI("http://127.0.0.1:5000/".concat(i,"/wellington/").concat("2019-01-01","/").concat("2019-12-10","/").concat(s,"/").concat(c)),t.next=4,fetch(a);case 4:return o=t.sent,t.next=7,o.json();case 7:r=t.sent,e(A(r)),d=Object(F.jsx)(Ae,{id:"vis-window_0",renderedComponent:l("vis-window_0")},"vis-window_0"),e(_(d)),u=Object(F.jsx)(Ae,(n={id:"overview_window"},Object(f.a)(n,"id","overview_window"),Object(f.a)(n,"renderedComponent",l("overview_window")),n)),e(_(u));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){function t(){return(t=Object(b.a)(h.a.mark((function t(){var n,a,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"2019-01-01","2019-12-10",n=encodeURI("http://127.0.0.1:5000/".concat(i,"/wellington/").concat("2019-01-01","/").concat("2019-12-10","/").concat(s,"/").concat(c)),t.next=4,fetch(n);case 4:return a=t.sent,t.next=7,a.json();case 7:o=t.sent,console.log("NEW JSON DATA: ",o),e(A(o)),p(o);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[i,s,c]),Object(a.useEffect)((function(){o.value.map((function(t){var e=t.windowComponent.props.renderedComponent;console.log(Me(n)),e.setStreamData(Me(n)),e.render()}))}),[r]),Object(a.useEffect)((function(){!function(){var t=Y.getState().windows.windowRenderComponent;"Stream Graph"===t&&o.value.forEach((function(t){return u(t.windowComponent)})),"Heat Chart"===t&&o.value.forEach((function(t){return u(t.windowComponent)}))}()}),[o]),Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(Pe,{children:[Object(F.jsx)(K,{}),Object(F.jsx)(Oe,{}),Object(F.jsx)(Ve,{children:Object(L.d)((function(t){return t.windows})).value.map((function(t){return Object(F.jsx)(Ae,{id:t.windowComponent.props.id,renderedComponent:t.windowComponent.props.renderedComponent},t.windowComponent.props.id)}))})]})})}},{label:"User Study",to:"/tut1",component:""}],tn=l.a.button(Ge||(Ge=Object(c.a)(["\n  font: 400 18px Roboto;\n  z-index: 1000;\n  color: ",";\n  background: ","\n  padding: 0 0.6em;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: none;\n  border-right: 1px solid rgba(255, 255, 255, 0.3);\n  border-left: none;\n  border-top: none;\n  border-bottom: none;\n  user-select: none;\n  cursor: pointer;\n  transition: ease background-color 250ms;\n  &:hover {\n    background: rgba(255, 255, 255, 0.164);\n  }\n  &:disabled {\n    cursor: default;\n    opacity: 0.9;\n  }\n  -webkit-writing-mode: none;\ntext-rendering: none;\nletter-spacing: none;\nword-spacing: none;\ntext-transform: none;\ntext-indent: none;\ntext-shadow: none;\n"])),Qe.text_colour,Qe.background_colour);tn.defaultProps={theme:"blue"};var en=Object(l.a)(tn)(He||(He=Object(c.a)(["\n\n  ","\n"])),(function(t){return t.active&&"\n    opacity: 1;\n    background-color: rgba(255, 255, 255, 0.1);\n  "})),nn=l.a.div(Ke||(Ke=Object(c.a)(["\n  height: ",";\n  width: 100%;\n  padding: 0px 10px;\n  align-items: center;\n  justify-content: left;\n  z-index: 1;\n  position: relative;\n  box-shadow: var(--container-shadow);\n  background: transparent url(./imgs/banner.jpg);\n  background-color: ","\n  grid-column-start: 1;\n  grid-column-end: 3;\n  display: flex;\n  flex-flow: row nowrap;\n"])),Qe.header_height,Qe.background_colour),an=Object(l.a)(d.b)(Ne||(Ne=Object(c.a)(["\n  text-decoration: none;\n  height: 100%;\n"]))),on=l.a.main(Je||(Je=Object(c.a)(["\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n"])));function rn(){var t=Object(a.useState)($e[0]),e=Object(s.a)(t,2),n=e[0],o=e[1];return sn(),Object(F.jsx)(d.a,{children:Object(F.jsxs)(on,{children:[Object(F.jsx)("nav",{children:Object(F.jsxs)(nn,{id:"header",children:[Object(F.jsx)(qe,{src:Ze}),$e.map((function(t){return Object(F.jsx)(an,{to:t.to,children:Object(F.jsx)(en,{active:n===t.label,onClick:function(){return o(t.label)},children:t.label})})}))]})}),Object(F.jsxs)(u.c,{children:[$e.map((function(t){return Object(F.jsx)(u.a,{path:t.to,exact:!0,component:t.component})})),Object(F.jsx)(u.a,{render:function(){return Object(F.jsx)("h1",{children:"404: page not found"})}})]})]})})}var sn=function(){for(var t in Qe.body)document.body.style[t]=Qe.body[t]};r.a.render(Object(F.jsx)(L.a,{store:Y,children:Object(F.jsx)(rn,{})}),document.getElementById("root"))},96:function(t,e){t.exports={engine_colours:{ELECTRIC:"#3cc0fd",EURO6:"#a3f383",EURO5:"#e2f750",EURO4:"#fdad0f",EURO3:"#717C71",EURO2:"#4F4537",EURO1:"#292121","PRE-EURO":"#ff0000"},engine_types:["PRE-EURO","EURO1","EURO2","EURO3","EURO4","EURO5","EURO6","ELECTRIC"]}}},[[238,1,2]]]);
//# sourceMappingURL=main.6c2b4aa7.chunk.js.map